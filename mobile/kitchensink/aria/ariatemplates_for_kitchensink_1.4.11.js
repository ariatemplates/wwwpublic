/*
 * Aria Templates 1.0.0 - 29 Oct 2013
 *
 * Copyright 2009-2013 Amadeus s.a.s.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function(){"undefined"==typeof Aria&&(Aria={}),Aria.version="1.0.0",Aria._start=(new Date).getTime(),Aria.$global=function(){return this}(),!Aria.$frameworkWindow&&Aria.$global.window&&(Aria.$frameworkWindow=Aria.$global),Aria.$window=Aria.$window||Aria.$frameworkWindow;var t={_abstract:1,_boolean:1,_break:1,_byte:1,_case:1,_catch:1,_char:1,_class:1,_const:1,_continue:1,_debugger:1,_default:1,_delete:1,_do:1,_double:1,_else:1,_enum:1,_export:1,_extends:1,_false:1,_final:1,_finally:1,_float:1,_for:1,_function:1,_goto:1,_if:1,_implements:1,_import:1,_in:1,_instanceof:1,_int:1,_interface:1,_long:1,_native:1,_new:1,_null:1,_package:1,_private:1,_protected:1,_public:1,_return:1,_short:1,_static:1,_super:1,_switch:1,_synchronized:1,_this:1,_throw:1,_throws:1,_transient:1,_true:1,_try:1,_typeof:1,_var:1,_void:1,_volatile:1,_while:1,_with:1,_constructor:1,_prototype:1};Aria.NULL_CLASSPATH="$classpath argument (or both $class and $package arguments) is mandatory and must be a string.",Aria.INVALID_NAMESPACE="Invalid namespace: %1",Aria.INVALID_DEFCLASSPATH="Invalid definition classpath: %1",Aria.INVALID_CLASSNAME_FORMAT="%2Invalid class name : '%1'. Class name must be a string and start with a capital case.",Aria.INVALID_CLASSNAME_RESERVED="%2Invalid class name: '%1'. Class name must be a string cannot be a reserved word.",Aria.INVALID_PACKAGENAME_FORMAT="%2Invalid package name : '%1'. Package name must be a string must start with a small case.",Aria.INVALID_PACKAGENAME_RESERVED="%2Invalid package name: '%1'. Package name must be a string cannot be a reserved word.",Aria.INSTANCE_OF_UNKNOWN_CLASS="Cannot create instance of class '%1'",Aria.DUPLICATE_CLASSNAME="class names in a class hierarchy must be different: %1",Aria.WRONG_BASE_CLASS="super class for %1 is not properly defined: base classes (%2) must be defined through Aria.classDefinition()",Aria.BASE_CLASS_UNDEFINED="super class for %1 is undefined (%2)",Aria.INCOHERENT_CLASSPATH="$class or $package is incoherent with $classpath",Aria.INVALID_INTERFACES="Invalid interface definition in Class %1",Aria.PARENT_NOTCALLED="Error: the %1 of %2 was not called in %3.",Aria.WRONGPARENT_CALLED="Error: the %1 of %2 was called instead of %3 in %4.",Aria.REDECLARED_EVENT="Redeclared event name: %1 in %2",Aria.INVALID_EXTENDSTYPE="Invalid $extendsType property for class %1.",Aria.TEXT_TEMPLATE_HANDLE_CONFLICT="Template error: can't load text template '%1' defined in '%2'. A macro, a library, a resource, a variable or another text template has already been declared with the same name.",Aria.RESOURCES_HANDLE_CONFLICT="Template error: can't load resources '%1' defined in '%2'. A macro, a library, a text template, a variable or another resource has already been declared with the same name.",Aria.CANNOT_EXTEND_SINGLETON="Class %1 cannot extend singleton class %2",Aria.FUNCTION_PROTOTYPE_RETURN_NULL="Prototype function of %1 cannot returns null",Aria.TPLSCRIPT_INSTANTIATED_DIRECTLY="Template scripts can not be instantiated directly",Aria.$classpath="Aria",Aria.$logDebug=function(){},Aria.$logInfo=function(){},Aria.$logWarn=function(){},Aria.$logError=function(){};var e=function(t,e){if(!t||"string"!=typeof t)return Aria.$logError(Aria.NULL_CLASSPATH),!1;for(var a=t.split("."),s=a.length,r=0;s-1>r;r++)if(!n(a[r],e))return!1;return i(a[s-1],e)?!0:!1},i=function(t,e){return e=e||"",t&&t.match(/^[_A-Z]\w*$/)?Aria.isJsReservedWord(t)?(Aria.$logError(Aria.INVALID_CLASSNAME_RESERVED,[t,e]),!1):!0:(Aria.$logError(Aria.INVALID_CLASSNAME_FORMAT,[t,e]),!1)},n=function(t,e){return e=e||"",t?Aria.isJsReservedWord(t)?(Aria.$logError(Aria.INVALID_PACKAGENAME_RESERVED,[t,e]),!1):(t.match(/^[a-z]\w*$/)||Aria.$logInfo(Aria.INVALID_PACKAGENAME_FORMAT,[t,e]),!0):(Aria.$logError(Aria.INVALID_PACKAGENAME_FORMAT,[t,e]),!1)},a=null,s=0,r=0,o={},l={},c=[],u=function(t,e,i,n,a){var s=!t["aria:nextCall"];return s||t["aria:nextCall"]==e.$classpath||Aria.$logError(Aria.WRONGPARENT_CALLED,[n,e.$classpath,t["aria:nextCall"],t.$classpath]),t["aria:nextCall"]=i?i.classDefinition.$classpath:null,e[n]?e[n].apply(t,a):i&&"$destructor"==n&&i.prototype.$destructor.apply(t,a),t["aria:nextCall"]&&"aria.core.JsObject"!=t["aria:nextCall"]&&Aria.$logError(Aria.PARENT_NOTCALLED,[n,t["aria:nextCall"],e.$classpath]),s&&(t["aria:nextCall"]=void 0),s},h=function(t,e){return Aria.memCheckMode?function(){try{this["aria:objnumber"]||(s++,this["aria:objnumber"]=s,o[s]=this),u(this,t,e,"$constructor",arguments)}catch(i){throw this["aria:objnumber"]&&(r++,o[this["aria:objnumber"]]=null,delete o[this["aria:objnumber"]],this["aria:objnumber"]=null),i}}:t.$constructor},p=function(t,e){return Aria.memCheckMode?function(){u(this,t,e,"$destructor",arguments),this["aria:objnumber"]&&(r++,o[this["aria:objnumber"]]=null,delete o[this["aria:objnumber"]],this["aria:objnumber"]=null)}:t.$destructor},d=function(t){aria.templates.Layout.setRootDim(t)},m=function(t,e,i){e&&Aria.$logError(e,i),a&&a.notifyClassLoadError(t)},g=function(t,e,i){var n=!1;for(var a in e)e.hasOwnProperty(a)&&(n||(n=!0),null!=t[a]?Aria.$logError(Aria.REDECLARED_EVENT,[a,i]):t[a]=e[a]);return n};Aria.__mergeEvents=g,Aria.minSizeMode=Aria.minSizeMode===!0,Aria.debug=Aria.debug===!0,Aria.enableProfiling=Aria.enableProfiling===!0,Aria.memCheckMode=Aria.memCheckMode===!0,Aria.domain=Aria.domain||null,Aria.FRAMEWORK_PREFIX=Aria.FRAMEWORK_PREFIX||"aria:",Aria.FRAMEWORK_RESOURCES=Aria.FRAMEWORK_RESOURCES||"aria/resources/",Aria.$classDefinitions={},Aria.$classes=[],Aria.__undisposedObjects=o,Aria.activateTestMode=function(){Aria.testMode=!0;var t=Aria.rootTemplates;if(t)for(var e=0,i=t.length;i>e;e++){var n=t[e];n.$refresh()}},Aria.dispose=function(t){if(t){var e,i,n;if("string"==typeof t){if(e=t,i=Aria.getClassRef(e),!i)return;if(n=i.classDefinition||i.interfaceDefinition,!n)return}else{if(i=t,n=i.classDefinition||i.interfaceDefinition,!n)return;if(e=n.$classpath,!e)return}var a=e.split("."),l=a[a.length-1];if(a.splice(a.length-1,1),a=Aria.nspace(a.join(".")),i==a[l]){n.$singleton&&i.$dispose(),n.$onunload&&n.$onunload.call(n.$noargConstructor.prototype,i);var c=n.$resources,u=n.$singleton?i:i.prototype;if(c)for(var h in c)c.hasOwnProperty(h)&&null!=c[h].provider&&(u[h].$dispose(),u[h]=null);delete a[l],delete this.$classDefinitions[e];for(var p,d=0;p=this.$classes[d];d++)if(p==i){this.$classes.splice(d,1);break}}}else{for(var m=Aria.$classes.slice(0),d=m.length-1;d>=0;d--){var g=m[d];Aria.dispose(g)}m=null;var _=Aria.memCheckMode;if(Aria=null,_)return{nbConstructions:s,nbDestructions:r,nbNotDisposed:s-r,notDisposed:o}}},Aria.nspace=function(t,e,i){if(null==i&&(i=Aria.$global),e=e!==!1,""===t)return i;if(!t||"string"!=typeof t)return Aria.$logError(Aria.INVALID_NAMESPACE,[t]),null;for(var n,a=t.split("."),s=a.length,r=0;s>r;r++){if(n=a[r],!n||Aria.isJsReservedWord(n))return Aria.$logError(Aria.INVALID_NAMESPACE,[t]),null;if(!i[n]){if(!e)return null;i[n]={}}i=i[n]}return i};var _={};Aria.getClassRef=function(t){return _[t]||(_[t]=Aria.nspace(t,!1))},Aria.cleanGetClassRefCache=function(t){t?delete _[t]:_={}},Aria.getClassInstance=function(t,e){var i=Aria.getClassRef(t);return i?new i(e):(Aria.$logError(Aria.INSTANCE_OF_UNKNOWN_CLASS,[t]),void 0)},Aria.isJsReservedWord=function(e){return t["_"+e]?!0:!1},Aria.checkJsVarName=function(t){return t.match(/^[a-zA-Z_\$][\w\$]*$/)?Aria.isJsReservedWord(t)?!1:!0:!1},Aria.tplScriptDefinition=function(t){Aria.classDefinition({$classpath:t.$classpath,$dependencies:t.$dependencies,$resources:t.$resources,$statics:t.$statics,$texts:t.$texts,$prototype:t.$prototype,$onload:function(e){e.tplScriptDefinition=t},$constructor:function(){this.$logError(Aria.TPLSCRIPT_INSTANTIATED_DIRECTLY)}})},Aria.classDefinition=function(t){if(!t)return Aria.$logError(Aria.NULL_CLASSPATH);var i=t.$classpath,n=t.$class,s=t.$package,r=t.$extends;if(!i&&(null==n||null==s))return Aria.$logError(Aria.NULL_CLASSPATH);var o,l,c;if(i){c=i;var u=c.lastIndexOf(".");if(u>-1?(o=c.slice(0,u),l=c.slice(u+1)):(o="",l=c),n&&n!=l||s&&s!=o)return Aria.$logError(Aria.INCOHERENT_CLASSPATH);t.$class=l,t.$package=o}else l=n,o=t.$package,c=o+"."+l,t.$classpath=c;if(e(c,"classDefinition: ")){t.$events||(t.$events={}),t.$noargConstructor=Function(),(!r||r.match(/^\s*$/))&&"aria.core.JsObject"!=c&&(r=t.$extends="aria.core.JsObject"),t.$constructor||(t.$constructor=Function(t.$extends+".prototype.constructor.apply(this, arguments);")),this.$classDefinitions[c]=t;var h=!0;if(a){var p={TPL:t.$templates,CSS:t.$css,TML:t.$macrolibs,CML:t.$csslibs},d=[],m=t.$dependencies||[];if(t.$implements&&t.$implements.length>0&&(m=m.concat(t.$implements)),aria.utils.Type.isObject(t.$resources))for(var g in t.$resources)t.$resources.hasOwnProperty(g)&&(t.$resources[g].hasOwnProperty("provider")?m.push(t.$resources[g].provider):d.push(t.$resources[g]));if(aria.utils.Type.isObject(t.$texts)&&(p.TXT=aria.utils.Array.extractValuesFromMap(t.$texts)),p.RES=d,p.JS=m,"aria.core.JsObject"!=r){var _=t.$extendsType||"JS";if("JS"!==_&&"TPL"!==_&&"TML"!==_&&"CSS"!==_&&"CML"!==_&&"TXT"!==_)return Aria.$logError(Aria.INVALID_EXTENDSTYPE,[l]);p[_]?p[_].push(r):p[_]=[r]}h=a.loadClassDependencies(c,p,{fn:Aria.loadClass,scope:Aria,args:c})}h&&this.loadClass(c,c)}},Aria.interfaceDefinition=function(t){var i=t.$classpath;if(e(i,"interfaceDefinition")){null==t.$events&&(t.$events={});var n=!0;a&&(n=a.loadClassDependencies(i,{JS:t.$extends?[t.$extends]:[]},{fn:aria.core.Interfaces.loadInterface,scope:aria.core.Interfaces,args:t})),n&&aria.core.Interfaces.loadInterface(t)}},Aria.copyObject=function(t,e){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};var f=Aria.$global.navigator,$=f?-1!=f.userAgent.toLowerCase().indexOf("msie"):!1;if(Aria.loadClass=function(t,i){if(i||(i=t),e(i,"loadClass")){var n=this.$classDefinitions[t];if(!n)return Aria.$logError(Aria.INVALID_DEFCLASSPATH,[t]);var s=n.$prototype,r=n.$statics,o=n.$events,u=(n.$beans,n.$resources),d=n.$texts,_=n.$implements,f="",b=i,v=i.lastIndexOf(".");v>-1&&(f=i.slice(0,v),b=i.slice(v+1));var y=Aria.nspace(f),A=null;if(n.$extends){if(!e(n.$extends,"parentClass"))return m(n.$classpath);if(A=Aria.getClassRef(n.$extends),!A)return m(n.$classpath,Aria.BASE_CLASS_UNDEFINED,[n.$classpath,n.$extends]);if(!A.classDefinition)return m(n.$classpath,Aria.WRONG_BASE_CLASS,[n.$classpath,n.$extends]);if(A.classDefinition.$singleton)return m(n.$classpath,Aria.CANNOT_EXTEND_SINGLETON,[n.$classpath,n.$extends])}var E;E=A?new A.classDefinition.$noargConstructor:{},E.$classpath=n.$classpath,E.$class=n.$class,E.$package=n.$package;var C={};E.$resources?(C=E.$resources,E.$resources={},Aria.copyObject(C,E.$resources),Aria.copyObject(u,E.$resources)):E.$resources=n.$resources;var w={};if(E.$texts?(w=E.$texts,E.$texts={},Aria.copyObject(w,E.$texts),Aria.copyObject(d,E.$texts)):E.$texts=n.$texts,n.$css&&(E.$css=n.$css),s){"function"==typeof s&&(s=s.apply({}),s||(Aria.$logError(Aria.FUNCTION_PROTOTYPE_RETURN_NULL,[i]),s={}),Aria.copyObject(s,n.$prototype));for(var T in s)s.hasOwnProperty(T)&&"$init"!=T&&("function"==typeof s[T]&&(s[T].displayName="#"+T),E[T]=s[T]);$&&(s.hasOwnProperty("toString")&&(E.toString=s.toString),s.hasOwnProperty("valueOf")&&(E.valueOf=s.valueOf))}var S={};if(u)for(var T in u)u.hasOwnProperty(T)&&(E[T]&&!C[T]?Aria.$logError(Aria.RESOURCES_HANDLE_CONFLICT,[T,i]):null!=u[T].provider?(S[T]=u[T],E[T]=Aria.getClassInstance(u[T].provider),E[T].getData=function(t){return function(){return t.__getData(b)}}(E[T]),E[T].__refName=T):E[T]=Aria.getClassRef(u[T]));if(d)for(var T in d)d.hasOwnProperty(T)&&(E[T]&&!w[T]?Aria.$logError(Aria.TEXT_TEMPLATE_HANDLE_CONFLICT,[T,i]):E[T]=Aria.getClassRef(d[T]));if(r&&Aria.copyObject(r,E),E.$events={},A&&g(E.$events,A.prototype.$events,E.$classpath),_)if(aria.utils.Type.isArray(_)){for(var T=0,I=_.length;I>T;T++)if(!aria.core.Interfaces.applyInterface(_[T],E))return a.notifyClassLoadError(E.$classpath)}else m(n.$classpath,Aria.INVALID_INTERFACES,[n.$classpath]);E.$interfaces||(E.$interfaces={}),g(E.$events,o,E.$classpath);var D=p(n,A);D&&(E.$destructor=D);var L="$"+n.$class;if(null!=E[L])return m(n.$classpath,Aria.DUPLICATE_CLASSNAME,n.$class);E[L]=E;var P=h(n,A);P.prototype=E,A&&(P.superclass=A.prototype),E.$constructor=E.constructor=P,n.$noargConstructor.prototype=E,n.$singleton?y[b]=new P:(r&&Aria.copyObject(r,P),y[b]=P),y[b].classDefinition=n,Aria.$classes.push(y[b]);for(var T in S)if(S.hasOwnProperty(T)){var x=S[T];x.hasOwnProperty("handler")&&E[T].setHandler(x.handler),x.hasOwnProperty("resources")&&E[T].setResources(x.resources),x.hasOwnProperty("onLoad")?E[T].fetchData({fn:x.onLoad,scope:E},b):c.push({ref:T,prot:E[T]})}l[b]={def:n,p:E,ns:y},this.loadSyncProviders(b)}},Aria.loadSyncProviders=function(t){if(c.length>0){var e=c.pop();e.prot.fetchData({fn:this.loadSyncProviders,scope:this,args:{calledback:!0}},t)}else{var i=t,n=l[i].def,s=l[i].p,r=l[i].ns,o=n.$prototype;o&&o.$init&&o.$init(s,n),n.$onload&&n.$onload.call(s,r[i]),a?a.notifyClassLoad(n.$classpath):"aria.core.ClassMgr"==n.$classpath&&(a=aria.core.ClassMgr),l[i]=null}},Aria.load=function(t){var e=new aria.core.MultiLoader(t);e.load()},Aria.beanDefinitions=function(t){aria.core.JsonValidator.beanDefinitions(t)},Aria.setRootDim=function(t){Aria.load({classes:["aria.templates.Layout"],oncomplete:{fn:d,args:t}})},Aria.loadTemplate=function(t,e){aria.core.TplClassLoader.loadTemplate(t,e)},Aria.disposeTemplate=function(t){return aria.core.TplClassLoader.disposeTemplate(t)},Aria.resourcesDefinition=function(t){var e=Aria.getClassRef(t.$classpath);if(e){var i=e.classDefinition.$prototype;aria.utils.Json.inject(t.$resources,i,!0);for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);a&&a.notifyClassLoad(t.$classpath)}else Aria.classDefinition({$classpath:t.$classpath,$singleton:!0,$constructor:function(){},$prototype:t.$resources})},Aria.copyGlobals=function(t){t.Aria=Aria;for(var e=Aria.$global,i=Aria.$classes,n=0,a=i.length;a>n;n++){var s=i[n];if(s){var r=s.$classpath;if(!r){var o=s.classDefinition||s.interfaceDefinition;o&&(r=o.$classpath)}if(r){var l=r.indexOf("."),c=l>-1?r.substring(0,l):r;t[c]=e[c]}}}},Aria.onDomReady=function(t){aria.dom.DomReady.onReady(t)},Aria.$frameworkWindow){if(null==Aria.rootFolderPath){var b,v,y;v=Aria.$frameworkWindow.document.getElementsByTagName("script"),b=v[v.length-1],v=null,y=b.src;var A=y.replace(/aria\/[^\/]*$/,"");if(A==y&&(A=A.substring(0,A.lastIndexOf("/"))+"/"),!A){var E=Aria.$frameworkWindow.location;A=E.protocol+"//"+E.host+"/";var C=E.pathname;C=C.match(/[\/\w\.\-]+\//gi),C=C?C[0]:"",A+=C}Aria.rootFolderPath=A}if("/"==Aria.rootFolderPath){var w=Aria.$frameworkWindow.location;Aria.rootFolderPath=w.protocol+"//"+w.host+"/"}}Aria.empty=function(){},Aria.returnTrue=function(){return!0},Aria.returnFalse=function(){return!1},Aria.returnNull=function(){return null},Aria.__tempIE=$})(),Aria.eval=Aria.__tempIE?function(srcJS,srcURL,evalContext){return eval(srcJS)}:function(srcJS,srcURL,evalContext){return srcURL&&(srcJS=[srcJS,"\n//@ sourceURL=",Aria.rootFolderPath,srcURL,"\n"].join("")),eval(srcJS)},delete Aria.__tempIE,function(){var t=Aria.FRAMEWORK_PREFIX+"isDisposed",e=function(t,e,n,a){for(var s in t[e])t[e].hasOwnProperty(s)&&i(t[e],s,n,a)},i=function(t,e,i,n,a,s){if(null!=t){var r=t[e];if(r){for(var o,l=r.length,c=!1,u=0;l>u;u++)if(o=r[u],c=!(a&&o.src!=a||i&&i!=o.scope||n&&n!=o.fn)){if(o.removed=!0,r.splice(u,1),s)break;u--,l--}0===r.length&&(t[e]=null,delete t[e])}}},n=function(t){var e=aria.utils.String.capitalize(t.method),i=this["on"+e+t.step];return i?i.call(this,t):(i=this["on"+t.method+t.step],i?i.call(this,t):void 0)},a=function(t,e,i){if(i>=e.nbInterceptors)return this[e.method].apply(this,t);var n=e.interceptors[i];if(n.removed)return a.call(this,r.args,e,i+1);var r={step:"CallBegin",method:e.method,args:t,cancelDefault:!1,returnValue:null},o=e.asyncCbParam;if(null!=o){var l={fn:s,scope:this,args:{info:r,interc:n,origCb:t[o]}};t[o]=l,o>=t.length&&(t.length=o+1),r.callback=l}if(this.$callback(n,r),!r.cancelDefault){try{r.returnValue=a.call(this,r.args,e,i+1)}catch(c){r.exception=c}if(r.step="CallEnd",delete r.cancelDefault,this.$callback(n,r),"exception"in r)throw r.exception}return r.returnValue},s=function(t,e){var i=e.interc;if(i.removed)return this.$callback(e.origCb,t);var n=e.info;return n.step="Callback",n.callback=e.origCb,n.callbackResult=t,n.cancelDefault=!1,n.returnValue=null,this.$callback(i,n),n.cancelDefault?n.returnValue:this.$callback(e.origCb,n.callbackResult)},r=function(t,e){var i="on"+aria.utils.String.capitalize(t);return e[i+"CallBegin"]||e[i+"Callback"]||e[i+"CallEnd"]||e["on"+t+"CallBegin"]||e["on"+t+"Callback"]||e["on"+t+"CallEnd"]?!0:!1},o=function(t,e,i){var n=i||{};for(var a in t)t.hasOwnProperty(a)&&(n[a]||(n[a]=[])).push(e);return n},l=function(t,e,i){var a=i||{};for(var s in t)t.hasOwnProperty(s)&&r(s,e)&&(a[s]||(a[s]=[])).push({fn:n,scope:e});return a};Aria.classDefinition({$classpath:"aria.core.JsObject",$constructor:function(){},$destructor:function(){this[t]=!0},$statics:{UNDECLARED_EVENT:"undeclared event name: %1",MISSING_SCOPE:"scope property is mandatory when adding or removing a listener (event: %1)",INTERFACE_NOT_SUPPORTED:"The '%1' interface is not supported on this object (of type '%2').",ASSERT_FAILURE:"Assert #%1 failed in %2",CALLBACK_ERROR:"An error occurred while processing a callback function: \ncalling class: %1\ncalled class: %2"},$prototype:{$init:function(t){t.$on=t.$addListeners},$assert:function(t,e){return e?!0:(this.$logError(this.ASSERT_FAILURE,[t,this.$classpath]),!1)},$dispose:function(){this.$destructor(),this._listeners&&(this._listeners=null,delete this._listeners),this.__$interceptors&&(this.__$interceptors=null,delete this.__$interceptors),this.__$interfaces&&aria.core.Interfaces.disposeInterfaces(this)},$logTimestamp:Aria.empty,$startMeasure:Aria.empty,$stopMeasure:Aria.empty,$logDebug:function(){return""},$logInfo:function(){return""},$logWarn:function(){return""},$logError:function(t,e,i){return Aria.$global.console&&("string"==typeof e&&(e=[e]),Aria.$global.console.error(t.replace(/%[0-9]+/g,function(t){return e[parseInt(t.substring(1),10)-1]}),i)),""},$callback:function(t,e,i){try{if(!t)return;if(t.$Callback)return t.call(e);var n,a=t.scope;a=a?a:this,n=t.fn?t.fn:t,"string"==typeof n&&(n=a[n]);var s=t.apply===!0&&t.args&&"[object Array]"===Object.prototype.toString.apply(t.args)?t.args.slice():[t.args],r=void 0===t.resIndex?0:t.resIndex;return r>-1&&s.splice(r,0,e),Function.prototype.apply.call(n,a,s)}catch(o){this.$logError(i||this.CALLBACK_ERROR,[this.$classpath,a?a.$classpath:""],o)}},$normCallback:function(t){var e,i=t.scope;return i=i?i:this,e=t.fn?t.fn:t,"string"==typeof e&&(e=i[e]),{fn:e,scope:i,args:t.args,resIndex:t.resIndex,apply:t.apply}},$alert:function(){var t,e=[];e.push("## "+this.$classpath+" ## ");for(var i in this)this.hasOwnProperty(i)&&(t=typeof this[i],"object"==t||"function"==t?e.push(i+=":["+t+"]"):"string"==t?e.push(i+=':"'+this[i]+'"'):e.push(i+=":"+this[i]));Aria.$window.alert(e.join("\n")),e=null},toString:function(){return"["+this.$classpath+"]"},$interface:function(t){return aria.core.Interfaces.getInterface(this,t)},$addInterceptor:function(t,e){var i=this.$interfaces[t];if(!i)return this.$logError(this.INTERFACE_NOT_SUPPORTED,[t,this.$classpath]),void 0;var n=this.__$interceptors;null==n&&(n={},this.__$interceptors=n);var a=aria.utils.Type.isCallback(e)?o:l,s=i.prototype.$interfaces;for(var r in s)if(s.hasOwnProperty(r)){var c=a(s[r].interfaceDefinition.$interface,e,n[r]);n[r]=c}},$removeInterceptors:function(t,i,n){var a=this.$interfaces[t],s=this.__$interceptors;if(a&&s){var r=a.prototype.$interfaces;for(var o in r)r.hasOwnProperty(o)&&e(s,o,i,n)}},$call:function(t,e,i,n){var s;return null==this.__$interceptors||null==this.__$interceptors[t]||null==(s=this.__$interceptors[t][e])?this[e].apply(this,i):a.call(this,i,{interceptors:s,nbInterceptors:s.length,method:e,asyncCbParam:n},0)},$addListeners:function(t,e){var i,n=t.scope?t.scope:null,a=e?e:this;for(var s in t)if(t.hasOwnProperty(s)&&(i=t[s],"scope"!=s))if("*"==s||null!=a.$events[s]){if(i.$Callback)i={fn:function(t,e){e.call(t)},scope:this,args:i};else if(i.fn){if(i={fn:i.fn,scope:i.scope,args:i.args,once:t[s].listenOnce,apply:i.apply,resIndex:i.resIndex},i.scope||(i.scope=n),!i.scope){this.$logError(this.MISSING_SCOPE,s);continue}}else{if(!n){this.$logError(this.MISSING_SCOPE,s);continue}i={fn:i,scope:n,once:t[s].listenOnce}}null==this._listeners?(this._listeners={},this._listeners[s]=[]):null==this._listeners[s]&&(this._listeners[s]=[]),i.src=a,this._listeners[s].push(i)}else this.$logError(this.UNDECLARED_EVENT,s,a.$classpath);n=i=s=null},$removeListeners:function(t,e){if(null!=this._listeners){var n,a=t.scope?t.scope:null;for(var s in t)if(t.hasOwnProperty(s)&&"scope"!=s&&this._listeners[s]){var r=t[s];if("function"==typeof r){if(null==a){this.$logError(this.MISSING_SCOPE,s);continue}i(this._listeners,s,a,r,e)}else{if(null==r.scope&&(r.scope=a),null==r.scope){this.$logError(this.MISSING_SCOPE,s);continue}i(this._listeners,s,r.scope,r.fn,e,r.firstOnly)}}a=n=r=null}},$unregisterListeners:function(t,e){if(null!=this._listeners){if(null==t&&null==e)for(var n in this._listeners)this._listeners.hasOwnProperty(n)&&(this._listeners[n]=null,delete this._listeners[n]);else for(var n in this._listeners)this._listeners.hasOwnProperty(n)&&i(this._listeners,n,t,null,e);n=null}},$onOnce:function(t,e){for(var i in t)t.hasOwnProperty(i)&&(t[i].listenOnce=!0);this.$addListeners(t,e)},$raiseEvent:function(t){if(null!=this._listeners){var e="",i=!1;if("string"==typeof t?e=t:(e=t.name,i=!0),null==e||null==this.$events[e])this.$logError(this.UNDECLARED_EVENT,[e,this.$classpath]);else{for(var n=[e,"*"],a=null,s=this._listeners,r=0;2>r;r++){var o=s[n[r]];if(o){a||(a=i?t:{},a.name=e),o=o.slice(0);for(var l,c,u=o.length,h=0;u>h;h++)if(l=o[h],c=l.src,!l.removed&&(0===r||null!=c.$events[e])){if(a.src=c,l.once){delete l.once;var p={};p[a.name]=l,this.$removeListeners(p)}this.$callback(l,a)}a.src=null}}s=o=u=null}}}}})}(),Aria.classDefinition({$classpath:"aria.utils.Type",$singleton:!0,$prototype:{isArray:function(t){return"[object Array]"===Object.prototype.toString.apply(t)},isString:function(t){return"string"==typeof t?!0:"[object String]"===Object.prototype.toString.apply(t)},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.apply(t)},isNumber:function(t){return"number"==typeof t?!0:"[object Number]"===Object.prototype.toString.apply(t)},isDate:function(t){return"[object Date]"===Object.prototype.toString.apply(t)},isBoolean:function(t){return t===!0||t===!1},isHTMLElement:function(t){if(t){var e=t.nodeName;return t===Aria.$window||aria.utils.Type.isString(e)||t===Aria.$frameworkWindow}return!1},isObject:function(t){return t?"[object Object]"===Object.prototype.toString.apply(t):!1},isInstanceOf:function(t,e){var i=Aria.getClassRef(e);return null==i?!1:t instanceof i},isFunction:function(t){return"[object Function]"===Object.prototype.toString.apply(t)},isContainer:function(t){return(this.isObject(t)||this.isArray(t))&&!(t instanceof aria.core.JsObject)},isCallback:function(t){if(null==t)return!1;if(t.$Callback)return!0;if(t.$classpath)return!1;var e=this.$normCallback(t);return"function"==typeof e.fn}}}),function(){var t,e=Array.prototype;Aria.classDefinition({$classpath:"aria.utils.Array",$singleton:!0,$constructor:function(){t=this},$destructor:function(){e=null,t=null},$prototype:{indexOf:e.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=t.length,n=0;i>n;n++)if(n in t&&t[n]===e)return n;return-1},contains:function(e,i){return-1!=t.indexOf(e,i)},clone:function(t){var e=t.slice(0);return e},remove:function(e,i){var n=t.indexOf(e,i);return n>-1?(t.removeAt(e,n),!0):!1},removeAt:function(t,e){return 1==t.splice(e,1).length},isEmpty:function(t){return 0===t.length},filter:e.filter?function(t,e,i){return t.filter(e,i)}:function(e,i,n){var a=t.clone(e),s=[];n=n||e;for(var r=a.length,o=0;r>o;o++){var l=a[o];i.call(n,l,o,e)&&s.push(l)}return s},forEach:e.forEach?function(t,e,i){return t.forEach(e,i)}:function(e,i,n){var a=t.clone(e),s=[];n=n||e;for(var r=a.length,o=0;r>o;o++)i.call(n,a[o],o,e);return s},extractValuesFromMap:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e}}})}(),Aria.classDefinition({$classpath:"aria.utils.QueryString",$singleton:!0,$constructor:function(){this.keyValues=null},$prototype:{_init:function(){var t=Aria.$frameworkWindow;this.keyValues=null!=t?this.parseQueryString(t.location.search):{}},parseQueryString:function(t){var e={};if(null==t||0===t.length)return e;t=t.substr(1,t.length);for(var i=t.split("&"),n=0;i.length>n;n++){var a=i[n].split("="),s=decodeURIComponent(a[0]),r=2==a.length?decodeURIComponent(a[1]):s;e[s]=r}return e},getKeyValue:function(t){return this.keyValues||this._init(),this.keyValues[t]}}}),Aria.classDefinition({$classpath:"aria.utils.json.JsonSerializer",$dependencies:["aria.utils.Type"],$constructor:function(t){this._optimized=t||!1},$prototype:function(){var escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},specialCharRegexp=/\W/,numberFirstRegexp=/^[0-9]/,quote=function(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'},fastSerializer=function(){var t=Aria.$global.JSON||{};if(t.stringify)return t.stringify;String.prototype.toJSON=Number.prototype.toJSON=Aria.$global.Boolean.prototype.toJSON=function(){return this.valueOf()};var e,i,n=function(t,a){var s,r,o,l,c,u=e,h=a[t];switch(h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),typeof h){case"string":return quote(h);case"number":return isFinite(h)?h+"":"null";case"boolean":case"null":return h+"";case"object":if(!h)return"null";if(e+=i,c=[],"[object Array]"===Object.prototype.toString.apply(h)){if(l=h.length,i){for(s=0;l>s;s+=1)c[s]=n(s,h)||"null";o=0===c.length?"[]":e?"[\n"+e+c.join(",\n"+e)+"\n"+u+"]":"["+c.join(",")+"]",e=u}else{for(c.push("["),s=0;l>s;s+=1)0!==s&&c.push(","),c.push(n(s,h)||"null");c.push("]"),o=c.join("")}return o}if(i){for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(o=n(r,h),o&&c.push(quote(r)+(e?": ":":")+o));o=0===c.length?"{}":e?"{\n"+e+c.join(",\n"+e)+"\n"+u+"}":"{"+c.join(",")+"}",e=u}else{var p=!1;c.push("{");for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(o=n(r,h),o&&(p&&(c[c.length]=","),c.push(quote(r),":",o),p=!0));c.push("}"),o=c.join("")}return o}};return function(t,a,s){var r;if(e="",i="","number"==typeof s)for(r=0;s>r;r+=1)i+=" ";else"string"==typeof s&&(i=s);return n("",{"":t})}}(),typeUtil=aria.utils.Type,defaults={indent:"",maxDepth:100,escapeKeyNames:!0,encodeParameters:!1,reversible:!1,serializedDatePattern:"yyyy/MM/dd HH:mm:ss",keepMetadata:!0};return{serialize:function(t,e){if(e=e?e:{},this._normalizeOptions(e),this._optimized&&10>=e.indent.length&&e.escapeKeyNames&&!e.encodeParameters&&e.keepMetadata&&e.maxDepth>=100&&!e.reversible){var i=Date.prototype.toJSON,n=RegExp.prototype.toJSON,a=Function.prototype.toJSON;try{return Date.prototype.toJSON=function(){return aria.utils.Date.format(this,e.serializedDatePattern)},RegExp.prototype.toJSON=function(){return this+""},Function.prototype.toJSON=function(){return"[function]"},fastSerializer(t,null,e.indent)}catch(s){return null}finally{Date.prototype.toJSON=i,RegExp.prototype.toJSON=n,Function.prototype.toJSON=a}}return this._serialize(t,e)},_normalizeOptions:function(t){for(var e in defaults)!defaults.hasOwnProperty(e)||e in t||(t[e]=defaults[e])},_serialize:function(t,e){return null===t?this._serializeNull(e):typeUtil.isBoolean(t)?this._serializeBoolean(t,e):typeUtil.isNumber(t)?this._serializeNumber(t,e):typeUtil.isString(t)?this._serializeString(t,e):typeUtil.isDate(t)?this._serializeDate(t,e):typeUtil.isRegExp(t)?this._serializeRegExp(t,e):typeUtil.isArray(t)?this._serializeArray(t,e):typeUtil.isObject(t)?this._serializeObject(t,e):typeUtil.isFunction(t)?this._serializeFunction(t,e):'"['+typeof t+']"'},_serializeObject:function(t,e){var i,n=e.indent,a=e.baseIndent?e.baseIndent:"",s=n?a+n:null;if(1>e.maxDepth)return e.reversible?null:"{...}";var r=["{"];n&&r.push("\n");var o=!0;for(var l in t)if(t.hasOwnProperty(l)&&this.__preserveObjectKey(l,e)){o=!1,n&&r.push(s),e.escapeKeyNames||specialCharRegexp.test(l)||numberFirstRegexp.test(l)?r.push(quote(l)+":"):r.push(l+":"),n&&r.push(" ");var c=aria.utils.Json.copy(e,!0);if(c.baseIndent=s,c.maxDepth=e.maxDepth-1,i=this._serialize(t[l],c),null===i)return null;r.push(i),n?r.push(",\n"):r.push(",")}return o||(r[r.length-1]=""),n?r.push("\n"+a+"}"):r.push("}"),r.join("")},__preserveObjectKey:function(t,e){return e.keepMetadata?!0:!aria.utils.Json.isMetadata(t)},_serializeArray:function(t,e){var i,n=e.indent,a=e.baseIndent?e.baseIndent:"",s=n?a+n:null;if(1>e.maxDepth)return e.reversible?null:"[...]";var r=t.length;if(0===r)return"[]";var o=["["];n&&o.push("\n");for(var l=0;r>l;l++){n&&o.push(s);var c=aria.utils.Json.copy(e,!0);if(c.baseIndent=s,c.maxDepth=e.maxDepth-1,i=this._serialize(t[l],c),null===i)return null;o.push(i),l!=r-1&&(o.push(","),n&&o.push("\n"))}return n?o.push("\n"+a+"]"):o.push("]"),o.join("")},_serializeString:function(t,e){var i;return t=t.replace(/([\\\"])/g,"\\$1").replace(/(\r)?\n/g,"\\n"),i=e.encodeParameters===!0?encodeURIComponent(t):t,'"'+i+'"'},_serializeNumber:function(t){return t+""},_serializeBoolean:function(t){return t?"true":"false"},_serializeDate:function(t,e){return e.reversible||!aria.utils.Date?"new Date("+t.getTime()+")":'"'+aria.utils.Date.format(t,e.serializedDatePattern)+'"'},_serializeRegExp:function(t,e){return e.reversible?t+"":this._serializeString(t+"",e)},_serializeFunction:function(){return'"[function]"'},_serializeNull:function(){return"null"},parse:function(string){var text=string+"";if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+text+")");throw Error("aria.utils.json.JsonSerializer.parse")}}}}),function(){var arrayUtils,typeUtils,jsonUtils,parProp,res=[],__getListenerMetaName=function(t,e){var i=e?jsonUtils.META_FOR_RECLISTENERS:jsonUtils.META_FOR_LISTENERS;return null!=t&&(i+="_"+t),i},__isValidContainer=function(t){return typeUtils.isContainer(t)&&!typeUtils.isHTMLElement(t)&&!t.$JsObject},__removeLinkToParent=function(t,e,i){var n=t?t[parProp]:null;if(n)for(var a,s=0;a=n[s];s++)if(a.parent==e&&a.property==i){n.splice(s,1);break}},__changeLinkToParent=function(t,e,i,n){var a=t?t[parProp]:null;if(a)for(var s,r=0;s=a[r];r++)if(s.parent==e&&s.property==i){s.property=n;break}},__addLinkToParent=function(t,e,i){__isValidContainer(t)&&(__checkBackRefs(t),t[parProp].push({parent:e,property:i}))},__includePropForBackRef=function(t){return t!=jsonUtils.OBJECT_PARENT_PROPERTY&&t!=jsonUtils.META_FOR_LISTENERS&&t!=jsonUtils.META_FOR_RECLISTENERS},__checkBackRefs=function(t){if(!t[parProp]){t[parProp]=[];for(var e in t)if(t.hasOwnProperty(e)&&__includePropForBackRef(e)){var i=t[e];__isValidContainer(i)&&(__checkBackRefs(i),i[parProp].push({parent:t,property:e}))}}},__cleanUpRecMarkers=function(t){var e=jsonUtils.TEMP_REC_MARKER;if(t[e]){t[e]=!1,delete t[e];var i=t[jsonUtils.OBJECT_PARENT_PROPERTY];if(i)for(var n=0,a=i.length;a>n;n++)__cleanUpRecMarkers(i[n].parent)}},__appendListeners=function(t,e){return null!=t&&(e||(e=[]),e.push.apply(e,t)),e},__retrieveListeners=function(t,e,i,n){if(null!=e&&(n=__retrievePropertySpecificListeners(t,e,i,n)),t[jsonUtils.TEMP_REC_MARKER])return n;n=__retrievePropertySpecificListeners(t,null,i,n);var a=t[jsonUtils.OBJECT_PARENT_PROPERTY];if(a){t[jsonUtils.TEMP_REC_MARKER]=!0;for(var s,r=0;s=a[r];r++)n=__retrieveListeners(s.parent,s.property,!0,n);
i||__cleanUpRecMarkers(t)}return n},__retrievePropertySpecificListeners=function(t,e,i,n){return n=__appendListeners(t[__getListenerMetaName(e,!0)],n),i||(n=__appendListeners(t[__getListenerMetaName(e)],n)),n},__callListeners=function(t,e,i){for(var n=0,a=t.length;a>n;n++){var s=t[n];if(s!=i&&s){var r=s.fn;r&&r.call(s.scope,e,s.args)}}},__notifyListeners=function(t,e,i,n){var a=__retrieveListeners(t,e);a&&(i.dataHolder=t,i.dataName=e,__callListeners(a,i,n))};Aria.classDefinition({$classpath:"aria.utils.Json",$dependencies:["aria.utils.json.JsonSerializer"],$singleton:!0,$constructor:function(){jsonUtils=this,arrayUtils=aria.utils.Array,typeUtils=aria.utils.Type,parProp=this.OBJECT_PARENT_PROPERTY,this.__defaultJsonSerializer=new aria.utils.json.JsonSerializer(!0)},$destructor:function(){jsonUtils=null,arrayUtils=null,typeUtils=null,parProp=null,res=null,this.__defaultJsonSerializer.$dispose(),this.__defaultJsonSerializer=null},$statics:{META_FOR_LISTENERS:Aria.FRAMEWORK_PREFIX+"listener",META_FOR_RECLISTENERS:Aria.FRAMEWORK_PREFIX+"reclistener",OBJECT_PARENT_PROPERTY:Aria.FRAMEWORK_PREFIX+"parent",TEMP_REC_MARKER:Aria.FRAMEWORK_PREFIX+"tempRecMarker",VALUE_CHANGED:0,KEY_ADDED:1,KEY_REMOVED:2,SPLICE:3,INVALID_JSON_CONTENT:"An error occured while loading an invalid JSON content:\ncontext: %1\nJSON content:\n%2",NOT_OF_SPECIFIED_DH_TYPE:"Invalid data holder type: expected to be an object or an array. Data holder provided: ",INVALID_SPLICE_PARAMETERS:"Invalid splice parameters.",INVALID_JSON_SERIALIZER_INSTANCE:"The provided instance of JSON serializer does not have a serialize method."},$prototype:{convertToJsonString:function(t,e,i){return i?"serialize"in i?i.serialize(t,e):(this.$logError(this.INVALID_JSON_SERIALIZER_INSTANCE),null):this.__defaultJsonSerializer.serialize(t,e)},splice:function(t,e,i){var n=arguments.length-3;if(!(typeUtils.isArray(t)&&typeUtils.isNumber(e)&&typeUtils.isNumber(i)&&n>=0&&i>=0))return this.$logError(this.INVALID_SPLICE_PARAMETERS,[],arguments),null;var a=t.length;if(0>e&&(e=a+e,0>e&&(e=0)),e>a&&(e=a),e+i>a&&(i=a-e),0===n&&0===i)return[];var s=Array.prototype,r=s.splice.apply(t,s.slice.call(arguments,1)),o=t.length;if(this.$assert(526,i==r.length),this.$assert(527,a+n-i==o),t[parProp]){if(i>0)for(var l=i-1;l>=0;l--)__removeLinkToParent(r[l],t,e+l);if(n>0)for(var l=e+n-1;l>=e;l--)__addLinkToParent(t[l],t,l);if(n!=i)for(var c=e+n,u=e+i;o>c;c++,u++)__changeLinkToParent(t[c],t,u,c)}for(var h=null,p=n==i?e+n:Math.max(a,o),l=e;p>l;l++)if(h=__retrievePropertySpecificListeners(t,l)){var d={dataHolder:t,dataName:l};l>=o?d.change=this.KEY_REMOVED:(d.change=this.VALUE_CHANGED,d.newValue=t[l]),d.oldValue=e+i>l?r[l-e]:t[l-i+n],__callListeners(h,d)}return h=__retrieveListeners(t),h&&__callListeners(h,{change:this.SPLICE,dataHolder:t,index:e,removed:r,added:s.slice.call(arguments,3)}),r},deleteKey:function(t,e,i,n){if(!__isValidContainer(t)){if(n)throw{code:this.NOT_OF_SPECIFIED_DH_TYPE};return this.$logError(this.NOT_OF_SPECIFIED_DH_TYPE,null,t),void 0}if(t.hasOwnProperty(e)){var a=t[e];delete t[e],t[parProp]&&__includePropForBackRef(e)&&__removeLinkToParent(a,t,e),__notifyListeners(t,e,{change:this.KEY_REMOVED,oldValue:a},i)}},setValue:function(t,e,i,n,a){if(!__isValidContainer(t)){if(a)throw{code:this.NOT_OF_SPECIFIED_DH_TYPE};return this.$logError(this.NOT_OF_SPECIFIED_DH_TYPE,null,t),void 0}var s=t.hasOwnProperty(e),r=t[e];return t[e]=i,r===i&&s||(t[parProp]&&__includePropForBackRef(e)&&(__removeLinkToParent(r,t,e),__addLinkToParent(i,t,e)),__notifyListeners(t,e,{change:s?this.VALUE_CHANGED:this.KEY_ADDED,newValue:i,oldValue:r},n)),i},getValue:function(t,e,i){return t&&e&&e in t?t[e]:i},addListener:function(t,e,i,n,a){if(typeUtils.isObject(e))return this.addListener(t,null,e,i,n);var s=__getListenerMetaName(e,a);if(!__isValidContainer(t)){if(n)throw{code:this.NOT_OF_SPECIFIED_DH_TYPE};return this.$logError(this.NOT_OF_SPECIFIED_DH_TYPE,null,t),void 0}if(t[s]){var r=t[s];if(arrayUtils.indexOf(r,i)>-1)return;r.push(i)}else t[s]=[i];a&&__checkBackRefs(t)},removeListener:function(t,e,i,n){if(typeUtils.isObject(e))return this.removeListener(t,null,e,i);var a=__getListenerMetaName(e,n);if(t&&null!=t[a]){var s=t[a],r=arrayUtils.indexOf(s,i);r>-1&&(1==s.length?(t[a]=null,delete t[a]):s.splice(r,1))}},copy:function(t,e,i,n){e=e!==!1;var a,s=!1;if(typeUtils.isArray(t)?(a=[],s=!0):typeUtils.isObject(t)&&(a={},s=!0),s){for(var r in t)if(t.hasOwnProperty(r)){if(-1!=r.indexOf(":")){if(!n)continue;if(this.isMetadata(r))continue}if(i&&!arrayUtils.contains(i,r))continue;a[r]=e?this.copy(t[r],e,null,n):t[r]}}else a=typeUtils.isDate(t)?new Date(t.getTime()):t;return a},load:function(str,ctxt,errMsg){var res=null;try{str=(""+str).replace(/^\s/,""),res=eval("("+str+")")}catch(ex){res=null,errMsg||(errMsg=this.INVALID_JSON_CONTENT),ctxt&&ctxt.$classpath&&(ctxt=ctxt.$classpath),this.$logError(errMsg,[ctxt,str],ex)}return res},inject:function(t,e,i){i=i===!0;var n,a=typeUtils.isArray(t)&&typeUtils.isArray(e),s=typeUtils.isObject(t)&&typeUtils.isObject(e);if(!a&&!s)return!1;if(a)if(i)for(var r=0,o=t.length;o>r;r++)n=t[r],e[r]?typeUtils.isContainer(n)?this.inject(n,e[r],!0)||(e[r]=n):e[r]=typeUtils.isDate(n)?new Date(n.getTime()):n:e[r]=n;else for(var r=0,o=t.length;o>r;r++)e.push(t[r]);else if(s)for(var l in t)t.hasOwnProperty(l)&&(n=t[l],e[l]&&i?typeUtils.isContainer(n)?this.inject(n,e[l],!0)||this.setValue(e,l,n):typeUtils.isDate(n)?this.setValue(e,l,new Date(n.getTime())):this.setValue(e,l,n):this.setValue(e,l,n));return!0},contains:function(t,e){var i=typeUtils.isArray(t),n=typeUtils.isObject(t),a=typeUtils.isArray(e),s=typeUtils.isObject(e);if(i&&a){for(var r=0,o=e.length;o>r;r++)if(!this.contains(t[r],e[r]))return!1}else{if(!n||!s){var l=typeUtils.isDate(t)&&typeUtils.isDate(e);return l?e.getTime()===t.getTime():e===t}for(var c in e)if(e.hasOwnProperty(c)){if(c.match(/:/))continue;if(e.hasOwnProperty(c)&&!this.contains(t[c],e[c]))return!1}}return!0},add:function(t,e,i){null==i&&(i=t.length),this.splice(t,i,0,e)},removeAt:function(t,e){this.splice(t,e,1)},equals:function(t,e){return this.contains(t,e)&&this.contains(e,t)},isMetadata:function(t){return aria.utils.Type.isString(t)?0===t.indexOf(Aria.FRAMEWORK_PREFIX):!1},removeMetadata:function(t){if(!t||!__isValidContainer(t))return t;var e=typeUtils.isArray(t)?[]:{};for(var i in t)this.isMetadata(i)||(e[i]=this.removeMetadata(t[i]));return e}}})}(),Aria.classDefinition({$classpath:"aria.utils.Object",$singleton:!0,$prototype:{keys:Object.keys?function(t){return aria.utils.Type.isObject(t)?Object.keys(t):[]}:function(t){if(!aria.utils.Type.isObject(t))return[];var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e},isEmpty:function(t){var e=this.keys(t);return 0===e.length}}}),Aria.classDefinition({$classpath:"aria.core.Browser",$singleton:!0,$constructor:function(){var t=Aria.$global.navigator,e=t?t.userAgent.toLowerCase():"";this.ua=e,this.isIE=!1,this.isIE6=!1,this.isIE7=!1,this.isIE8=!1,this.isIE9=!1,this.isIE10=!1,this.isOpera=!1,this.isChrome=!1,this.isSafari=!1,this.isWebkit=!1,this.isGecko=!1,this.isFirefox=!1,this.version="",this.isWindows=!1,this.isMac=!1,this.name="",this.environment="",this.majorVersion="",this.isPhone=!1,this.isTablet=!1,this.isIOS=!1,this.isAndroid=!1,this.isWindowsPhone=!1,this.isBlackBerry=!1,this.isSymbian=!1,this.isOtherMobile=!1,this.isMobileView=!1,this.DesktopView=!1,this.isFF=!1,this.isBlackBerryBrowser=!1,this.isAndroidBrowser=!1,this.isSafariMobile=!1,this.isSafari=!1,this.isChrome=!1,this.isIEMobile=!1,this.isOperaMobile=!1,this.isOperaMini=!1,this.isS60=!1,this.isPhantomJS=!1,this.isOtherBrowser=!1,this.osName="",this.osVersion="",this.browserType="",this.browserVersion="",this.deviceName="",this._init()},$prototype:{toString:function(){return this.name+" "+this.version},_init:function(){var t=this.ua;if(t.indexOf("msie")>-1){if(this.isIE=!0,this.name="IE",/msie[\/\s]((?:\d+\.?)+)/.test(t)){this.version=RegExp.$1;var e=parseInt(this.version,10);if(6==e)this.isIE6=!0;else if(e>=7){var i=Aria.$frameworkWindow.document,n=i.documentMode||7;this["isIE"+n]=!0,n!=e&&(this.version=n+".0")}}}else t.indexOf("opera")>-1?(this.isOpera=!0,this.name="Opera"):t.indexOf("chrome")>-1?(this.isChrome=!0,this.name="Chrome"):t.indexOf("phantomjs")>-1?(this.isPhantomJS=!0,this.name="PhantomJS"):t.indexOf("webkit")>-1?(this.isSafari=!0,this.name="Safari"):(t.indexOf("gecko")>-1&&(this.isGecko=!0),t.indexOf("firefox")>-1&&(this.name="Firefox",this.isFirefox=!0));if(this.isWebkit=this.isSafari||this.isChrome||this.isPhantomJS,-1!=t.indexOf("windows")||-1!=t.indexOf("win32")?(this.isWindows=!0,this.environment="Windows"):-1!=t.indexOf("macintosh")&&(this.isMac=!0,this.environment="MacOS"),this.isIE||(this.isFirefox?/firefox[\/\s]((?:\d+\.?)+)/.test(t)&&(this.version=RegExp.$1):this.isSafari?/version[\/\s]((?:\d+\.?)+)/.test(t)&&(this.version=RegExp.$1):this.isChrome?/chrome[\/\s]((?:\d+\.?)+)/.test(t)&&(this.version=RegExp.$1):this.isPhantomJS?/phantomjs[\/\s]((?:\d+\.?)+)/.test(t)&&(this.version=RegExp.$1):this.isOpera&&/version[\/\s]((?:\d+\.?)+)/.test(t)&&(this.version=RegExp.$1)),this.version&&/(\d+)\./.test(this.version)&&(this.majorVersion=parseInt(RegExp.$1,10)),this.ua){var a=[{pattern:/(android)[\/\s-]?([\w\.]+)*/i},{pattern:/(ip[honead]+).*os\s*([\w]+)*\slike\smac/i},{pattern:/(blackberry).+version\/([\w\.]+)/i},{pattern:/(rim\stablet+).*os\s*([\w\.]+)*/i},{pattern:/(windows\sphone\sos|windows\s?[mobile]*)[\s\/\;]?([ntwce\d\.\s]+\w)/i},{pattern:/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i},{pattern:/(webos|palm\sos|bada|rim\sos|meego)[\/\s-]?([\w\.]+)*/i}],s=[{pattern:/(chrome|crios)\/((\d+)?[\w\.]+)/i},{pattern:/(mobile\ssafari)\/((\d+)?[\w\.]+)/i},{pattern:/(mobile)\/\w+\s(safari)\/([\w\.]+)/i},{pattern:/(iemobile)[\/\s]?((\d+)?[\w\.]*)/i},{pattern:/(safari)\/((\d+)?[\w\.]+)/i},{pattern:/(series60.+(browserng))\/((\d+)?[\w\.]+)/i},{pattern:/(firefox)\/([\w\.]+).+(fennec)\/\d+/i},{pattern:/(opera\smobi)\/((\d+)?[\w\.-]+)/i},{pattern:/(opera\smini)\/((\d+)?[\w\.-]+)/i},{pattern:/(dolfin|Blazer|S40OviBrowser)\/((\d+)?[\w\.]+)/i}],r=[{pattern:/\(((ipad|playbook));/i},{pattern:/\(((ip[honed]+));/i},{pattern:/(blackberry[\s-]?\w+)/i},{pattern:/(hp)\s([\w\s]+\w)/i},{pattern:/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i},{pattern:/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i},{pattern:/((s[cgp]h-\w+|gt-\w+|galaxy\snexus))/i},{pattern:/sec-((sgh\w+))/i},{pattern:/(maemo|nokia).*(\w|n900|lumia\s\d+)/i},{pattern:/(lg)[e;\s\-\/]+(\w+)*/i},{pattern:/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola)[\s_-]?([\w-]+)*/i}];this.__testUaMatch(a,"OS"),this.__testUaMatch(s,"BROWSER"),this.__testUaMatch(r,"DEVICE")}},__testUaMatch:function(t,e){for(var i,n=0,a=t.length;a>n;n++){if("OS"===e&&(i=this.__checkNavigator(t[n].pattern,this.ua))){this.__setOs(i,n);break}if("BROWSER"===e&&(i=this.__checkNavigator(t[n].pattern,this.ua))){this.__setBrowser(i,n);break}if("DEVICE"===e&&(i=this.__checkNavigator(t[n].pattern,this.ua))){this.__setDevice(i);break}}},__checkNavigator:function(t,e){return t.exec(e)},__setDevice:function(t){this.deviceName=t[1]||""},__setBrowser:function(t,e){var i=["Mobile Safari","Chrome","Other"];switch(e){case 0:this.browserType=i[1],this.browserVersion=t[2]||"",this.isChrome=!0;break;case 1:this.browserType=t[1]||"",this.browserVersion=t[2]||"",this.isAndroid&&(this.isAndroidBrowser=!0),this.isBlackBerry&&(this.isBlackBerryBrowser=!0);break;case 2:this.browserType=i[0],this.browserVersion=t[3]||"",this.isSafariMobile=!0;break;case 3:this.browserType=t[1]||"",this.browserVersion=t[2]||"",t[0]&&(t[0].indexOf("XBLWP7")>-1||t[0].indexOf("ZuneWP7")>-1)?this.DesktopView=!0:this.isMobileView=!0,this.isIEMobile=!0;break;case 4:this.browserType=t[1]||"",this.browserVersion=t[2]||"",this.isSafari=!0;break;case 5:this.browserType=t[2]||"",this.browserVersion=t[3]||"",this.isS60=!0;break;case 6:this.browserType=t[1]||"",this.browserVersion=t[2]||"",this.isFF=!0;break;case 7:this.browserType=t[1]||"",this.browserVersion=t[2]||"",this.isFF=!0;break;case 8:this.browserType=t[1]||"",this.browserVersion=t[2]||"",this.isFF=!0;break;case 9:this.browserType=i[2],this.browserVersion=t[2]||"",this.isOtherBrowser=!0}},__setOs:function(t,e){var i=["Android","IOS","BlackBerry","BlackBerry Tablet OS","Windows","Symbian","Other"];switch(e){case 0:this.isAndroid=!0,this.osName=i[0],this.osVersion=t[2]||"",t[2]&&"3"==t[2].match(/\d/)+""?this.isTablet=!0:this.isPhone=!0;break;case 1:this.isIOS=!0,this.osName=i[1];var n=t[2]||"";this.osVersion=n.replace(/\_/g,"."),"iPad"==t[1]?this.isTablet=!0:this.isPhone=!0;break;case 2:this.isBlackBerry=!0,this.osName=i[2],this.osVersion=t[2]||"",this.isPhone=!0;break;case 3:this.isBlackBerry=!0,this.osName=i[3],this.osVersion=t[2]||"",this.isTablet=!0;break;case 4:this.isWindowsPhone=!0,this.osName=i[4],this.osVersion=t[2]||"",this.isPhone=!0;break;case 5:this.isSymbian=!0,this.osName=i[5],this.osVersion=t[2]||"",this.isPhone=!0;break;case 6:this.isOtherMobile=!0,this.osName=i[6],this.osVersion=t[2]||"",this.isPhone=!0}this.osVersion=this.osVersion.replace(/\s*/g,"")}}}),Aria.classDefinition({$classpath:"aria.dom.DomReady",$singleton:!0,$events:{ready:""},$constructor:function(){this.isReady=!1,this._isListening=!1,this._listenersToRemove=[]},$prototype:{onReady:function(t){this.isReady?this.$callback(t):this.$on({ready:t,scope:this}),this._isListening||(this._isListening=!0,this._listen())},_listen:function(){var t=Aria.$frameworkWindow;if(null==t)return this._raiseReadyEvent(),void 0;if(this._checkReadyState(!1),!this.isReady){var e,i=t.document,n=aria.core.Browser,a=this;if(t.addEventListener){n.isOpera?(e=function(){a._checkCSSLoaded()},i.addEventListener("DOMContentLoaded",e,!1),this._listenersToRemove.push([i,"removeEventListener","DOMContentLoaded",e])):(e=function(){a._raiseReadyEvent()},i.addEventListener("DOMContentLoaded",e,!1),this._listenersToRemove.push([i,"removeEventListener","DOMContentLoaded",e]));var s=function(){a._raiseReadyEvent()};this._listenersToRemove.push([t,"removeEventListener","load",s]),t.addEventListener("load",s,!1)}else t.attachEvent&&(t===t.top?this._checkScroll():a._checkReadyState(!0),e=function(){a._raiseReadyEvent()},this._listenersToRemove.push([t,"detachEvent","onload",e]),t.attachEvent("onload",e))}},_checkReadyState:function(t){var e=Aria.$frameworkWindow.document,i=this;"complete"===e.readyState?this._raiseReadyEvent():t&&setTimeout(function(){i._checkReadyState()},16)},_checkCSSLoaded:function(){for(var t=this,e=Aria.$frameworkWindow.document,i=0;e.styleSheets.length>i;i++)if(e.styleSheets[i].disabled)return setTimeout(function(){t._checkCSSLoaded()},16),void 0;this._raiseReadyEvent()},_checkScroll:function(){var t=this;try{Aria.$frameworkWindow.document.documentElement.doScroll("left")}catch(e){return setTimeout(function(){t._checkScroll()},16),void 0}this._raiseReadyEvent()},_raiseReadyEvent:function(){this.isReady||(this.isReady=!0,this._removeListeners(),this.$raiseEvent("ready"))},_removeListeners:function(){for(var t,e=this._listenersToRemove,i=0,n=e.length;n>i;i++)t=e[i],t[0][t[1]](t[2],t[3],!1);this._listenersToRemove=[]}}}),Aria.classDefinition({$classpath:"aria.core.Cache",$singleton:!0,$statics:{EXTENSION_MAP:{JS:".js",TPL:".tpl",CSS:".tpl.css",TML:".tml",CML:".cml",TXT:".tpl.txt",RES:".js"}},$prototype:{content:{},STATUS_NEW:1,STATUS_LOADING:2,STATUS_AVAILABLE:3,STATUS_ERROR:4,getItem:function(t,e,i){i!==!0&&(i=!1);var n=null;if(i){null==this.content[t]&&(this.content[t]={});var n=this.content[t][e];null==n&&(n={status:this.STATUS_NEW,value:null},this.content[t][e]=n)}else null!=this.content[t]&&(n=this.content[t][e]);return n},getFilename:function(t){var e=this.getItem("classes",t,!1);return e?t.replace(/\./g,"/")+this.EXTENSION_MAP[e.content]:void 0}}}),Aria.classDefinition({$classpath:"aria.core.ClassLoader",$events:{classReady:"",classError:"",complete:""},$constructor:function(t,e){this._refClasspath=t,t&&(this._refLogicalPath=aria.core.ClassMgr.getBaseLogicalPath(t,e)),this._classGeneratorClassName=null,this._fullLogicalPath=null,this.callback=null,this._mdp=null,this._mdpErrors=!1,this._isLoadingRefDefinition=!1,this._classDefinitionCalled=!1,this.handleError=!0},$statics:{CLASS_LOAD_FAILURE:"Class definition for %1 cannot be loaded.",CLASS_LOAD_ERROR:"Load of class %1 failed",CLASS_LOAD_MISSING_REF:"ClassLoader.loadClassDefinition() cannot be called if no reference classpath is defined.",MISSING_CLASS_DEFINITION:"Error: the definition of class '%2' was not found in logical path '%1' - please check the classpath defined in this file."},$prototype:{loadClassDefinition:function(){return this._isLoadingRefDefinition?void 0:(this._isLoadingRefDefinition=!0,null==this._refClasspath?(this.$logError(this.CLASS_LOAD_MISSING_REF),void 0):(aria.core.DownloadMgr.loadFile(this.getRefLogicalPath(),{fn:this._onClassDefinitionReceive,scope:this},{fullLogicalPath:this._fullLogicalPath}),void 0))},getRefLogicalPath:function(){return this._refLogicalPath},_onClassDefinitionReceive:function(){var t=this.getRefLogicalPath(),e=aria.core.DownloadMgr.getFileContent(t),i=!1;if(e)try{this._loadClass(e,t)}catch(n){this.handleError&&this.$logError(this.CLASS_LOAD_ERROR,[this._refClasspath],n),i=!0}else this.handleError&&this.$logError(this.CLASS_LOAD_FAILURE,this._refClasspath),i=!0;return i&&aria.core.ClassMgr.notifyClassLoadError(this._refClasspath),t=e=null,i},_loadClass:function(){this.$assert(204,!1)},addDependencies:function(t,e){if(t===!1)return this._mdpErrors=!0,void 0;for(var i,n,a=t.length,s=aria.core.ClassMgr,r=0;a>r;r++)n=t[r],i=s.getClassLoader(n,e),i&&(i.handleError=this.handleError,this._mdp||(this._mdp=[]),this._mdp.push({loader:i,classpath:n,isReady:!1}),i.$on({classReady:this._onMdpLoad,classError:this._onMdpLoad,scope:this}));i=s=null},loadDependencies:function(){var t=this._mdp;if(t)for(var e=t.length,i=0;e>i;i+=1){var n=t[i];if(n.isReady||n.loader.loadClassDefinition(),!this._mdp)break}else this._mdpErrors&&this._handleError()},getCircular:function(t){if(t){if(this._refClasspath==t)return!0}else t=this._refClasspath;var e;if(this._mdp)for(var i=0,n=this._mdp.length;n>i;i++)if(e=this._mdp[i].loader.getCircular(t))return e===!0?this._refClasspath:e;return!1},_onMdpLoad:function(t){"classError"===t.name&&(this._mdpErrors=!0);var e=t.refClasspath;this.$assert(283,!!e),this.$assert(284,null!=this._mdp);for(var i,n=this._mdp.length,a=!0,s=!1,r=0;n>r;r++)if(i=this._mdp[r],s||i.isReady||i.classpath!=e){if(a)a=i.isReady;else if(s)break}else s=!0,i.isReady=!0;this.$assert(301,s===!0),a&&(this._mdpErrors?this._handleError():null!=this._refClasspath?(this.$assert(286,null!=this.callback),this.callback.fn.call(this.callback.scope,this.callback.args)):(this._mdp=null,this.notifyLoadComplete()))},_handleError:function(){null!=this._refClasspath?aria.core.ClassMgr.notifyClassLoadError(this._refClasspath):this.notifyLoadError()},notifyLoadError:function(){this.$raiseEvent({name:"classError",refClasspath:this._refClasspath}),this.$raiseEvent({name:"complete",refClasspath:this._refClasspath})},notifyLoadComplete:function(){this.$raiseEvent({name:"classReady",refClasspath:this._refClasspath}),this.$raiseEvent({name:"complete",refClasspath:this._refClasspath})},notifyClassDefinitionCalled:function(){this._classDefinitionCalled=!0},_loadClassAndGenerate:function(t,e,i){var n=/^\s*\/\*[\s\S]*?\*\//,a=t.replace(n,""),s=/^\s*Aria\.classDefinition\(/;if(s.test(a))this.__evalGeneratedClass({classDef:t,scope:this},{logicalPath:e});else{var r="aria.templates."+this._classGeneratorClassName,o=[r];i&&o.push(i),Aria.load({classes:o,oncomplete:{fn:this.__generateClass,scope:this,args:{classDef:t,logicalPath:e,classpath:this._refClasspath}}})}},__generateClass:function(t){var e=aria.templates[this._classGeneratorClassName];try{e.parseTemplate(t.classDef,!1,{fn:this.__evalGeneratedClass,scope:this,args:{logicalPath:t.logicalPath,classGenerator:e}},{file_classpath:t.logicalPath})}catch(i){this.$logError(this.CLASS_LOAD_ERROR,[this._refClasspath],i)}},__fallbackGenerateClass:function(t,e){this.$logWarn(this.TEMPLATE_DEBUG_EVAL_ERROR,[this._refClasspath]);var i=t.classGenerator;i.parseTemplateFromTree(e,!1,{fn:this.__evalGeneratedClass,scope:this,args:{logicalPath:t.logicalPath,classGenerator:i}},{file_classpath:t.logicalPath},!0)},__evalGeneratedClass:function(t,e){var i=t.classDef;try{Aria.eval(i,e.logicalPath),this._classDefinitionCalled||(this.$logError(this.MISSING_CLASS_DEFINITION,[this.getRefLogicalPath(),this._refClasspath]),aria.core.ClassMgr.notifyClassLoadError(this._refClasspath))}catch(n){if(!t.debug&&Aria.debug)try{this.__fallbackGenerateClass(e,t.tree)}catch(a){this.$logError(this.TEMPLATE_DEBUG_EVAL_ERROR,[this._refClasspath],a)}else this.$logError(this.TEMPLATE_EVAL_ERROR,[this._refClasspath],n)}}}}),Aria.classDefinition({$classpath:"aria.core.JsClassLoader",$extends:"aria.core.ClassLoader",$constructor:function(){this.$ClassLoader.constructor.apply(this,arguments),this._refLogicalPath+=".js"},$prototype:{_loadClass:function(t,e){Aria.eval(t,e),this._classDefinitionCalled||(this.$logError(this.MISSING_CLASS_DEFINITION,[this.getRefLogicalPath(),this._refClasspath]),aria.core.ClassMgr.notifyClassLoadError(this._refClasspath))}}}),Aria.classDefinition({$classpath:"aria.core.ResClassLoader",$extends:"aria.core.ClassLoader",$constructor:function(){this.$ClassLoader.constructor.apply(this,arguments),this.serverResource=!1,this._refClasspath&&aria.core.ResMgr.addResFile(this._refClasspath)},$statics:{REGEXP:/Aria\.resourcesDefinition\(/,DEPRECATED_LOCALES:{sp_AR:"ar_SA",ko_KO:"ko_KR",cn_CN:"zh_CN",tw_TW:"zh_TW"},DEPRECATED_LOCALES_WARNING:"The locale %1 is deprecated and will be removed soon, please use %2 locale instead.",RESOURCE_NOT_FOUND:"Error: the resource file '%1' for '%2' locale was not found",RESOURCE_NOT_RESOLVED:"Error: No resource file for '%1' could be found"},$destructor:function(){this.serverResource=null,this.$ClassLoader.$destructor.call(this)},$prototype:{_loadClass:function(t,e){var i=Aria.getClassRef(this._refClasspath);this._classDefinitionCalled||(Aria.eval(t,e),i||this._classDefinitionCalled||(this.$logError(this.MISSING_CLASS_DEFINITION,[this.getRefLogicalPath(),this._refClasspath]),aria.core.ClassMgr.notifyClassLoadError(this._refClasspath)))},_onClassDefinitionReceive:function(t){var e=this.getRefLogicalPath(),i=aria.core.DownloadMgr.getFileContent(e),n=!1;if(i&&this.REGEXP.test(i))this.$ClassLoader._onClassDefinitionReceive.call(this,t);else{var a=aria.core.ResMgr.getFallbackLocale(this._refClasspath);if(this.handleError&&this.$logWarn(this.RESOURCE_NOT_FOUND,[this._refClasspath,a.currResLocale]),this.serverResource)n=!0;else{var s=RegExp("(_[a-z][a-z](_[A-Z][A-Z])??)?.js"),r=this._refLogicalPath.replace(s,(""!==a.newResLocale?"_":"")+a.newResLocale)+".js";this._refLogicalPath!==r?(this._refLogicalPath=r,this._isLoadingRefDefinition=!1,this.$ClassLoader.loadClassDefinition.call(this)):n=!0}n&&(this.$logError(this.RESOURCE_NOT_RESOLVED,[this._refClasspath]),aria.core.ClassMgr.notifyClassLoadError(this._refClasspath)),s=r=null}e=i=null},loadClassDefinition:function(){if(!this._isLoadingRefDefinition){var t=aria.core.environment.Environment.isDevMode(),e=aria.core.ResMgr.currentLocale;if(e in this.DEPRECATED_LOCALES){var i=this.DEPRECATED_LOCALES[e];this.$logWarn(this.DEPRECATED_LOCALES_WARNING,[e,i])}var n={fn:this.__loadParentDefinition,scope:this};this.__buildLogicalPath(this._refClasspath,this._refLogicalPath,n,e,t)}},__buildLogicalPath:function(t,e,i,n,a){var s={logical:e,serverResource:!1,full:null};if(t.match(/\.Res$/)){if(!a){var r,o=t.split(".");return o&&o.length>1&&(r=o[o.length-2]),e+=(n?"_":"")+n+".js",s.serverResource=!0,s.logical=e,i.args=s,aria.modules&&aria.modules.RequestMgr?aria.modules.RequestMgr.createI18nUrl(r,n,i):Aria.load({classes:["aria.modules.RequestMgr"],oncomplete:function(){aria.modules.RequestMgr.createI18nUrl(r,n,i)}}),void 0}e+=".js"}else e+=(n?"_":"")+n+".js";s.logical=e,i.args=s,this.$callback(i)},__loadParentDefinition:function(t,e){this._refLogicalPath=e.logical,this.serverResource=e.serverResource,this._fullLogicalPath=e.full,this.$ClassLoader.loadClassDefinition.call(this)}}}),function(){var t=function(t){var e=t.cfg.tplDiv;e&&aria.utils.Dom.replaceHTML(e,"#TEMPLATE ERROR#"),this.$callback(t.cb,{success:!1})},e=function(t,e){var i=e.tplCtxt,n=e.cfg;i.viewReady(),this.$callback(e.cb,{success:!0,tplCtxt:n.provideContext?i:null})},i=function(i,n){var a=n.cfg,s=new aria.templates.TemplateCtxt;i.moduleCtrlPrivate&&a.moduleCtrl.autoDispose&&(a.toDispose?a.toDispose.push(i.moduleCtrlPrivate):a.toDispose=[i.moduleCtrlPrivate]),a.moduleCtrl=i.moduleCtrl,a.isRootTemplate=!0;var r=s.initTemplate(a);r&&s.dataReady();var o=a.tplDiv;aria.core.Browser.isIE&&(o.style.background=""),o.className=s.getCSSClassNames(),r?(n.tplCtxt=s,s.$onOnce({SectionRefreshed:{fn:e,scope:this,args:n}}),s.$refresh()):(s.$dispose(),t.call(this,n))},n=function(t){var e=t.cfg,n=e.moduleCtrl;n&&!n.getData?aria.templates.ModuleCtrlFactory.createModuleCtrl(n,{fn:i,args:t,scope:this}):(n&&!e.moduleCtrlPrivate&&n.$publicInterface&&(e.moduleCtrl=n.$publicInterface()),i.call(this,{moduleCtrl:e.moduleCtrl},t))},a=function(e){var i=e.cfg,a=e.cb;if(!aria.core.JsonValidator.normalize({json:i,beanName:"aria.templates.CfgBeans.LoadTemplateCfg"}))return this.$callback(a,{success:!1}),void 0;var s=["aria.templates.TemplateCtxt","aria.templates.CSSMgr"],r=i.moduleCtrl;if(r&&!r.getData){if(!aria.core.JsonValidator.normalize({json:r,beanName:"aria.templates.CfgBeans.InitModuleCtrl"}))return this.$callback(a,{success:!1}),void 0;s.push("aria.templates.ModuleCtrlFactory",r.classpath)}var o=["aria.templates.GlobalStyle"];aria.widgets&&aria.widgets.AriaSkin&&o.push("aria.templates.LegacyGeneralStyle"),i.reload&&(aria.templates.TemplateManager.unloadTemplate(i.classpath,i.reloadByPassCache),aria.templates.CSSMgr&&(o=o.concat(aria.templates.CSSMgr.getInvalidClasspaths(!0))));var l=aria.templates.Layout;i.rootDim&&l.setRootDim(i.rootDim);var c=i.div;if(c=aria.utils.Dom.replaceHTML(c,""),!c)return this.$callback(a,{success:!1}),void 0;if(Aria.minSizeMode&&(c.style.border="2px solid red"),i.div=c,c.className=this.addPrintOptions(c.className,i.printOptions),(null!=i.width||null!=i.height)&&(l.setDivSize(c,i.width,i.height),("object"==typeof i.width||"object"==typeof i.height)&&l.registerAutoresize(c,i.width,i.height)),aria.core.Browser.isIE6||aria.core.Browser.isIE7){var u=c.style.position;"absolute"!=u&&"relative"!=u&&(c.style.position="relative")}var h=Aria.$window.document.createElement("div");h.className="xLDI",c.appendChild(h),i.tplDiv=h,Aria.load({classes:s,templates:[i.classpath],css:o,oncomplete:{scope:this,args:e,fn:n},onerror:{scope:this,args:e,fn:t}}),c=null,h=null};Aria.classDefinition({$classpath:"aria.core.TplClassLoader",$extends:"aria.core.ClassLoader",$constructor:function(){this.$ClassLoader.constructor.apply(this,arguments),this._refLogicalPath+=".tpl",this._classGeneratorClassName="TplClassGenerator"},$onload:function(){var t=aria.core.TplClassLoader;t.$callback=aria.core.JsObject.prototype.$callback,t.$logError=aria.core.JsObject.prototype.$logError,t.$normCallback=aria.core.JsObject.prototype.$normCallback,t.$classpath="aria.core.TplClassLoader"},$statics:{TEMPLATE_EVAL_ERROR:"Error while evaluating the class generated from template '%1'",TEMPLATE_DEBUG_EVAL_ERROR:"Error while evaluating the class generated from template '%1'",MISSING_TPLSCRIPTDEFINITION:"The template script associated to template %1 must be defined using Aria.tplScriptDefinition.",_importScriptPrototype:function(t,e){var i=t.tplScriptDefinition;if(!i)return this.$logError(this.MISSING_TPLSCRIPTDEFINITION,[e.$classpath]);var n=i.$classpath.split("."),a=n[n.length-1],s="$"+a,r={};if(e[s])return this.$logError(Aria.DUPLICATE_CLASSNAME,[i.$classpath]);Aria.copyObject(i.$prototype,r),Aria.copyObject(i.$statics,r);var o=t.classDefinition.$resources;if(o){e.$resources||(e.$resources={});var l=t.prototype;for(var c in o)o.hasOwnProperty(c)&&(e[c]&&!e.$resources[c]?this.$logError(Aria.RESOURCES_HANDLE_CONFLICT,[c,i.$classpath]):(r[c]=l[c],e.$resources[c]=o[c]))}var u=t.classDefinition.$texts;if(u){e.$texts||(e.$texts={});for(var c in u)u.hasOwnProperty(c)&&(e[c]&&!e.$texts[c]?this.$logError(Aria.TEXT_TEMPLATE_HANDLE_CONFLICT,[c,i.$classpath]):(r[c]=t.prototype[c],e.$texts[c]=u[c]))}Aria.copyObject(r,e),r.constructor=i.$constructor||Aria.empty,r.$destructor=i.$destructor||Aria.empty,e[s]=r},addPrintOptions:function(t,e){return t=t.replace(/(\s|^)\s*xPrint\w*/g,""),"adaptX"==e?t+=" xPrintAdaptX":"adaptY"==e?t+=" xPrintAdaptY":"adaptXY"==e?t+=" xPrintAdaptX xPrintAdaptY":"hidden"==e&&(t+=" xPrintHide"),t},loadTemplate:function(t,e){var i=Aria.getClassRef("aria.core.environment.Customizations");i&&i.isCustomized()&&!i.descriptorLoaded()?i.$onOnce({descriptorLoaded:{fn:this._startLoad,scope:this,args:{cfg:t,cb:e}}}):this._startLoad(null,{cfg:t,cb:e})},_startLoad:function(t,e){var i=e.cfg,n=e.cb,s=Aria.getClassRef("aria.core.environment.Customizations"),r=i.origClasspath||i.classpath;i.classpath=s?s.getTemplateCP(r):r,i.origClasspath=r,Aria.load({classes:["aria.templates.Layout","aria.templates.CfgBeans","aria.utils.Dom","aria.templates.TemplateManager"],oncomplete:{fn:a,args:{cfg:i,cb:n},scope:this}})},disposeTemplate:function(t){return"string"==typeof t&&(t=aria.utils.Dom.getElementById(t)),aria&&aria.utils&&aria.utils.Dom?aria.templates.TemplateCtxtManager.disposeFromDom(t):void 0}},$prototype:{_loadClass:function(t,e){this._loadClassAndGenerate(t,e)}}})}(),Aria.classDefinition({$classpath:"aria.core.CSSClassLoader",$extends:"aria.core.ClassLoader",$constructor:function(){this.$ClassLoader.constructor.apply(this,arguments),this._refLogicalPath+=".tpl.css",this._classGeneratorClassName="CSSClassGenerator"},$statics:{TEMPLATE_EVAL_ERROR:"Error while evaluating the class generated from CSS template '%1'",TEMPLATE_DEBUG_EVAL_ERROR:"Error while evaluating the class generated from CSS template '%1'"},$prototype:{_loadClass:function(t,e){this._loadClassAndGenerate(t,e,"aria.templates.CSSMgr")}}}),Aria.classDefinition({$classpath:"aria.core.TmlClassLoader",$extends:"aria.core.ClassLoader",$constructor:function(){this.$ClassLoader.constructor.apply(this,arguments),this._refLogicalPath+=".tml",this._classGeneratorClassName="TmlClassGenerator"},$statics:{TEMPLATE_EVAL_ERROR:"Error while evaluating the class generated from template macro library '%1'",TEMPLATE_DEBUG_EVAL_ERROR:"Error while evaluating the class generated from template macro library '%1'"},$prototype:{_loadClass:function(t,e){this._loadClassAndGenerate(t,e)}}}),Aria.classDefinition({$classpath:"aria.core.CmlClassLoader",$extends:"aria.core.ClassLoader",$constructor:function(){this.$ClassLoader.constructor.apply(this,arguments),this._refLogicalPath+=".cml",this._classGeneratorClassName="CmlClassGenerator"},$statics:{TEMPLATE_EVAL_ERROR:"Error while evaluating the class generated from CSS macro library '%1'",TEMPLATE_DEBUG_EVAL_ERROR:"Error while evaluating the class generated from CSS macro library '%1'"},$prototype:{_loadClass:function(t,e){this._loadClassAndGenerate(t,e)}}}),Aria.classDefinition({$classpath:"aria.core.TxtClassLoader",$extends:"aria.core.ClassLoader",$constructor:function(){this.$ClassLoader.constructor.apply(this,arguments),this._refLogicalPath+=".tpl.txt",this._classGeneratorClassName="TxtClassGenerator"},$statics:{TEMPLATE_EVAL_ERROR:"Error while evaluating the class generated from text template '%1'",TEMPLATE_DEBUG_EVAL_ERROR:"Error while evaluating the class generated from text template '%1'"},$prototype:{_loadClass:function(t,e){this._loadClassAndGenerate(t,e)}}}),Aria.classDefinition({$classpath:"aria.core.ClassMgr",$singleton:!0,$events:{classComplete:""},$constructor:function(){this._cache=null,this._classTypes={JS:"aria.core.JsClassLoader",TPL:"aria.core.TplClassLoader",RES:"aria.core.ResClassLoader",CSS:"aria.core.CSSClassLoader",TML:"aria.core.TmlClassLoader",CML:"aria.core.CmlClassLoader",TXT:"aria.core.TxtClassLoader"}
},$statics:{CIRCULAR_DEPENDENCY:"Class %1 and %2 have circular dependency",MISSING_CLASSLOADER:"The class loader of type %1 needed to load class %2 is missing. Make sure it is packaged."},$prototype:{getBaseLogicalPath:function(t){var e=t.split(".");return e.join("/")},notifyClassLoad:function(t){this._cache||(this._cache=aria.core.Cache),this.$assert(1,this._cache);var e=this._cache.getItem("classes",t,!0);e.status=this._cache.STATUS_AVAILABLE,e.loader&&e.loader.notifyLoadComplete();var i=Aria.getClassRef(t);if(i){var n=Aria.getClassRef(t).classDefinition;n&&n.$css&&aria.templates.CSSMgr.registerDependencies(t,n.$css)}},notifyClassLoadError:function(t){this._cache||(this._cache=aria.core.Cache),this.$assert(1,this._cache);var e=this._cache.getItem("classes",t,!0);e.status=this._cache.STATUS_ERROR,e.loader&&e.loader.notifyLoadError()},filterMissingDependencies:function(t,e){if(!t)return null;for(var i,n,a,s=this._cache,r=null,o=0,l=t.length;l>o;o++)if(i=t[o],n=s.getItem("classes",i,!0),a=n.status,a!=s.STATUS_AVAILABLE){if(a==s.STATUS_ERROR)return!1;a==s.STATUS_NEW&&Aria.getClassRef(i)&&"RES"!=e?n.status=s.STATUS_AVAILABLE:(r||(r=[]),r.push(i))}return r},loadClassDependencies:function(t,e,i){this._cache||(this._cache=aria.core.Cache),this.$assert(2,this._cache),this.$assert(72,i&&i.fn&&i.scope);var n=this._cache,a=this.getClassLoader(t);if(!a){var s=n.getItem("classes",t,!0);s.status=n.STATUS_LOADING,s=null,a=this.getClassLoader(t)}if(a.notifyClassDefinitionCalled(),!e)return!0;a.callback=i;var r=!0;for(var o in e)if(e.hasOwnProperty(o)){var l=this.filterMissingDependencies(e[o]);null!=l&&(r=!1,a.addDependencies(l,o))}if(r){var s=n.getItem("classes",t,!0);return s.status=n.STATUS_LOADING,!0}var c=a.getCircular();return c?(this.$logError(this.CIRCULAR_DEPENDENCY,[t,c]),this.notifyClassLoadError(t)):(a.loadDependencies(),!1)},getClassLoader:function(t,e){var i=this._cache,n=i.getItem("classes",t,!0),a=n.status;if(a==i.STATUS_AVAILABLE||a==i.STATUS_ERROR)return null;var s=n.loader;if(!s){var r=null!=e?this._classTypes[e]:aria.core.ClassLoader;"string"==typeof r&&(r=Aria.getClassRef(r)),r?(s=new r(t,e),n.loader=s,n.content=e,s.$on({complete:this._onClassLoaderComplete,scope:this})):this.$logError(this.MISSING_CLASSLOADER,[e,t])}return n.status=i.STATUS_LOADING,s},unloadClass:function(t,e){var i=Aria.getClassRef(t);if(i){var n=Aria.getClassRef(t).classDefinition;n&&n.$css&&aria.templates.CSSMgr.unregisterDependencies(t,n.$css,!0,e)}Aria.dispose(t),Aria.cleanGetClassRefCache(t);var a=aria.core.Cache.getFilename(t);a&&aria.core.DownloadMgr.clearFile(a,e);var s=this._cache.content.classes;delete s[t]},unloadClassesByType:function(t,e){var i=this._cache.content.classes;for(var n in i)if(i.hasOwnProperty(n)&&i[n].content===t){if(e){Aria.dispose(n),Aria.cleanGetClassRefCache(n);var a=aria.core.Cache.getFilename(n);aria.core.DownloadMgr.clearFile(a,!0)}delete i[n]}},_onClassLoaderComplete:function(t){var e=t.refClasspath;this.$assert(4,e);var i=t.src;i.$dispose();var n=aria.core.Cache.getItem("classes",e);n&&(n.loader=null,delete n.loader),this.$raiseEvent({name:"classComplete",refClasspath:e})}}}),Aria.classDefinition({$classpath:"aria.core.DownloadMgr",$singleton:!0,$dependencies:["aria.utils.Type","aria.utils.Json"],$constructor:function(){this._cache=null,this._urlMap={},this._rootMap={},this._jsonUtils=aria.utils.Json,this._typeUtils=aria.utils.Type,this._timestampURL={}},$destructor:function(){this._cache=null,this._urlMap=null,this._rootMap=null,this._jsonUtils=null,this._timestampURL=null},$prototype:{updateUrlMap:function(t){this._jsonUtils.inject(t,this._urlMap,!0)},updateRootMap:function(t){this._jsonUtils.inject(t,this._rootMap,!0)},enableURLTimestamp:function(t,e){e!==!1?this._timestampURL[t]=!0:delete this._timestampURL[t]},getURLWithTimestamp:function(t,e){if(e||this._timestampURL[t]){var i=(new Date).getTime();return-1!=t.indexOf("?")?t+"&timestamp="+i:t+"?timestamp="+i}return t},getPackages:function(t){this._typeUtils.isString(t)&&(t=[t]);for(var e=function(t,i,n){if(0!==t.length)for(var a in i){var s=i[a];if("string"==typeof s){s="/"+s;for(var r=0,o=t.length;o>r;r++){var l=t[r];if(s.substr(0,l.length)==l){n[s]=!0,t.slice(r,r);break}}}else e(t,i[a],n)}},i=[],n=0,a=t.length;a>n;n++)i.push(t[n]);var s={};e(t,this._urlMap,s);var r=[];for(var o in s)r.push(o);return r},loadFile:function(t,e,i){this._cache||(this._cache=aria.core.Cache),this.$assert(34,this._cache),this.$assert(35,e.scope),this.$assert(36,e.fn);var n=this._cache,a=n.getItem("files",t,!0),s=a.status;if(s==n.STATUS_AVAILABLE||s==n.STATUS_ERROR){var r={name:"fileReady",src:this,logicalPaths:[t],url:null};return this.$callback(e,r)}var o=a.loader;if(!o){this.$assert(63,aria.core.FileLoader);var l;l=i&&i.fullLogicalPath?i.fullLogicalPath:this.resolveURL(t);var c=n.getItem("urls",l,!0);if(c.status==this._cache.STATUS_AVAILABLE){var r={name:"fileReady",src:this,logicalPaths:[t],url:l,downloadFailed:!0};return this.$callback(e,r)}c.loader?this.$assert(72,c.status==n.STATUS_LOADING):(c.loader=new aria.core.FileLoader(l),c.status=n.STATUS_LOADING,c.loader.$on({complete:this._onFileLoaderComplete,scope:this})),o=c.loader,a.loader=o,l=c=null}o.addLogicalPath(t);var u=e.args?e.args:null;o.$on({fileReady:{fn:e.fn,args:u,scope:e.scope}}),o.loadFile(),u=o=null},_extractTarget:function(t,e,i){for(var n=0,a=e.length;a>n;n++){var s=e[n];if(!this._typeUtils.isObject(t)||this._typeUtils.isInstanceOf(t,"aria.core.JsObject"))break;if(!t[s]){t=i?t["*"]&&n==a-1?t["*"]:t["**"]:t["*"];break}t=t[s]}return{node:t,index:n}},resolveURL:function(t,e){var i,n=t,a=Aria.rootFolderPath,s=t.lastIndexOf("."),r=t.substring(0,s),o=this._urlMap,l=this._rootMap,c=r.split("/");return e!==!0&&(i=this._extractTarget(o,c,!0),o=i.node,this._typeUtils.isString(o)?n=o:this._typeUtils.isInstanceOf(o,"aria.utils.Callback")?n=o.call(t):this._typeUtils.isFunction(o)&&(n=o.call(null,t))),l=this._extractTarget(l,c).node,this._typeUtils.isString(l)?a=l:this._typeUtils.isInstanceOf(l,"aria.utils.Callback")?a=l.call(t):this._typeUtils.isFunction(l)&&(a=l.call(null,t)),a+n},_onFileLoaderComplete:function(t){var e,i=t.src,n=this._cache,a=i.getLogicalPaths();if(a)for(var s=a.length,r=0;s>r;r++)e=n.getItem("files",a[r],!1),e&&(this.$assert(120,e.loader==i),e.loader=null);e=n.getItem("urls",i.getURL(),!1),e&&(this.$assert(128,e.loader==i),e.loader=null,e.status=this._cache.STATUS_AVAILABLE),i.$dispose(),i=n=e=a=null},loadFileContent:function(t,e,i){this._cache||(this._cache=aria.core.Cache);var n=this._cache.getItem("files",t,!0);i?n.status=this._cache.STATUS_ERROR:(n.value=e,n.status=this._cache.STATUS_AVAILABLE),n=null},getFileContent:function(t){var e=this._cache.getItem("files",t,!1);return e&&e.status==this._cache.STATUS_AVAILABLE?e.value:null},loadTplFileContent:function(t,e){var i=aria.core.ClassMgr.getBaseLogicalPath(t)+".tpl";this.loadFile(i,{fn:this._onTplFileContentReceive,scope:this,args:{origCb:e}},null)},_onTplFileContentReceive:function(t,e){var i={content:null};t.downloadFailed&&(i.downloadFailed=t.downloadFailed),t.logicalPaths.length>0&&(i.content=this.getFileContent(t.logicalPaths[0])),this.$callback(e.origCb,i)},clearFile:function(t,e){var i=this._cache.content;delete i.files[t];var n=this.resolveURL(t);delete i.urls[n],e&&this.enableURLTimestamp(n,!0)}}}),Aria.classDefinition({$classpath:"aria.core.FileLoader",$events:{fileReady:"",complete:""},$constructor:function(t){this._url=t,this._urlItm=aria.core.Cache.getItem("urls",t,!0),this._logicalPaths=[],this._isProcessing=!1,this.status=aria.core.Cache.STATUS_NEW},$statics:{INVALID_MULTIPART:"Error in multipart structure of %1, part %2",LPNOTFOUND_MULTIPART:"The expected logical path %1 was not found in multipart %2",EXPECTED_MULTIPART:"The expected multipart structure was not found in %1."},$prototype:{_multiPartHeader:/^(\/\*[\s\S]*?\*\/\s*\r?\n)?\/\/\*\*\*MULTI-PART(\r?\n[^\n]+\n)/,_logicalPathHeader:/^\/\/LOGICAL-PATH:([^\s]+)$/,loadFile:function(){this._isProcessing||(this.$assert(33,this._logicalPaths.length>0),this._isProcessing=!0,aria.core.IO.asyncRequest({sender:{classpath:this.$classpath,logicalPaths:this._logicalPaths},url:aria.core.DownloadMgr.getURLWithTimestamp(this._url),callback:{fn:this._onFileReceive,onerror:this._onFileReceive,scope:this},expectedResponseType:"text"}))},addLogicalPath:function(t){for(var e=this._logicalPaths,i=0,n=e.length;n>i;i++)if(e[i]===t)return!1;return this._logicalPaths.push(t),!0},getLogicalPaths:function(){return this._logicalPaths},getURL:function(){return this._url},_onFileReceive:function(t){var e,i="200"!=t.status;if(this.$assert(79,this._logicalPaths.length>0),!i)if(e=this._multiPartHeader.exec(t.responseText),null!=e){for(var n,a=t.responseText.split(e[2]),s=a.length,r={},o=1;s>o;o+=2){n=this._logicalPathHeader.exec(a[o]),null!=n&&(n=n[1]);var l=a[o+1];null!=n&&null!=l?(o+3>s&&(this._urlItm.status=aria.core.Cache.STATUS_AVAILABLE),r[n]=1,aria.core.DownloadMgr.loadFileContent(n,l,null==l)):this.$logError(this.INVALID_MULTIPART,[t.url,(o+1)/2])}for(var c=0,o=0;this._logicalPaths.length>o;o++)n=this._logicalPaths[o],1!=r[n]&&(this.$logError(this.LPNOTFOUND_MULTIPART,[n,t.url]),aria.core.DownloadMgr.loadFileContent(n,null,!0),c++);c==this._logicalPaths.length&&(i=!0)}else this._urlItm.status=aria.core.Cache.STATUS_AVAILABLE,1==this._logicalPaths.length?aria.core.DownloadMgr.loadFileContent(this._logicalPaths[0],t.responseText,!1):(this.$logError(this.EXPECTED_MULTIPART,t.url),i=!0);if(i&&null==e)for(var o=0;this._logicalPaths.length>o;o++)aria.core.DownloadMgr.loadFileContent(this._logicalPaths[o],t.responseText,!0);this.$raiseEvent({name:"fileReady",logicalPaths:this._logicalPaths,url:this._url,downloadFailed:i}),this._isProcessing=!1,this.$raiseEvent({name:"complete"})}}}),Aria.classDefinition({$classpath:"aria.core.Timer",$singleton:!0,$constructor:function(){this._callbacks={},this._cancelIds={},this._cbCount=0,this._numberOfCallbacks=0},$destructor:function(){this.callbacksRemaining()},$statics:{TIMER_CB_ERROR:"Uncaught exception in Timer callback (%1)",TIMER_CB_ERROR_ERROR:"Uncaught exception in Timer callback error handler (%1)"},$prototype:{_MAX_COUNT:1e5,callbacksRemaining:function(){var t=this._callbacks;if(this._numberOfCallbacks>0){var e;for(var i in t)e=t[i],this.cancelCallback(i+"-"+e.cancelId)}},addCallback:function(t){this.$assert(74,t&&t.scope&&t.fn);var e=t.onerror?t.onerror:null,i=t.onerrorScope?t.onerrorScope:null;this._cbCount++,this._numberOfCallbacks++;var n=t.delay>0?t.delay:1,a=t.args?t.args:null;this._callbacks[""+this._cbCount]={fn:t.fn,scope:t.scope,delay:n,args:a,onerror:e,onerrorScope:i};var s=this._cbCount,r=setTimeout(function(){aria.core.Timer._execCallback(s)},n);this._cancelIds[""+r]=this._cbCount,this._callbacks[""+this._cbCount].cancelId=r;var o=this._cbCount+"-"+r;return this._cbCount>this._MAX_COUNT&&(this._cbCount=0),o},_execCallback:function(t){var e=""+t,i=this._callbacks[e];if(i){this._deleteCallback(e,!0);try{i.fn.call(i.scope,i.args)}catch(n){if(null!=i.onerror)try{var a=null!=i.onerrorScope?i.onerrorScope:i.scope;i.onerror.call(a,n,i)}catch(s){this.$logError(this.TIMER_CB_ERROR_ERROR,[e],s)}else this.$logError(this.TIMER_CB_ERROR,[e],n)}i.fn=null,i.scope=null,i.onerror=null,i.onerrorScope=null}},cancelCallback:function(t){var e=t.split("-"),i=e[0],n=parseInt(e[1],10);clearTimeout(n),this._deleteCallback(i)},_deleteCallback:function(t,e){var i=this._callbacks[""+t];i&&(delete this._cancelIds[""+i.cancelId],this._numberOfCallbacks--,delete this._callbacks[""+t],e||(i.fn=null,i.scope=null,i.onerror=null,i.onerrorScope=null))}}}),function(){var t=aria.utils.Type,e=Aria.__mergeEvents,i=aria.core.ClassMgr,n=-1,a=function(){return n++,n},s=function(t){for(var e=1e7*Math.random(),i=""+(e|e);t[i];)i+="x";return i},r={Function:1,Object:1,Interface:1},o={$type:"Function"},l={$type:"Object"},c=function(e){var i;if(t.isFunction(e))return o;if(t.isString(e))i={$type:e};else{if(t.isArray(e))return l;if(!t.isObject(e))return null;i=e}var n=i.$type;return r[n]?aria.core.JsonValidator.normalize({json:i,beanName:"aria.core.CfgBeans.ItfMember"+n+"Cfg"})?i:null:null},u=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},h={$interface:function(){},$destructor:function(){},$addListeners:function(){},$removeListeners:function(){},$unregisterListeners:function(){},$on:function(){},toString:function(){return"["+this.$classpath+"]"}},p=function(){};p.prototype=h;var d={protoProperty:!0},m={};m.__proto__=d;var g=m.protoProperty?function(t,e){t.__proto__=e;for(var i in t)t.hasOwnProperty(i)&&delete t[i]}:function(t,e){var i=t.__$linkItfWrappers;if(i&&t.hasOwnProperty("__$linkItfWrappers"))for(var n=0,a=i.length;a>n;n++)g.call(this,i[n],e);for(var n in t)t.hasOwnProperty(n)&&delete t[n],n in t&&(t[n]=e[n]);for(var n in e)t[n]=e[n];delete t.__$linkItfWrappers,e.hasOwnProperty("__$linkItfWrappers")?e.__$linkItfWrappers.push(t):e.__$linkItfWrappers=[t]};d=null,m=null,Aria.classDefinition({$classpath:"aria.core.Interfaces",$singleton:!0,$statics:{INVALID_INTERFACE_MEMBER:"The '%1' interface has a '%2' member, which does not respect the constraints on interface member names. This member will be ignored.",INVALID_INTERFACE_MEMBER_DEF:"Invalid definition for the '%2' member on the '%1' interface. This member will be ignored.",BASE_INTERFACE_UNDEFINED:"Super interface for %1 is undefined (%2)",WRONG_BASE_INTERFACE:"Super interface for %1 is not properly defined: base interfaces (%2) must be defined through Aria.interfaceDefinition.",METHOD_NOT_IMPLEMENTED:"Class '%1' has no implementation of method '%2', required by interface '%3'.",WRONG_INTERFACE:"Interface '%1' declared in the $implements section of class '%2' was not properly defined through Aria.interfaceDefinition."},$prototype:{generateKey:s,linkItfWrappers:g,loadInterface:function(t){var n,r=t.$classpath,o=null;if(t.$extends){if(o=Aria.getClassRef(t.$extends),!o)return this.$logError(this.BASE_INTERFACE_UNDEFINED,[r,t.$extends]),i.notifyClassLoadError(r),void 0;var l=o?o.interfaceDefinition:null;if(l=l?l.$noargConstructor:null,!l)return this.$logError(this.WRONG_BASE_INTERFACE,[r,t.$extends]),i.notifyClassLoadError(r),void 0;n=new l,n.$interfaces=u(o.prototype.$interfaces)}else n=new p,n.$interfaces={};n.$classpath=r;var d="__iid"+a(),m=t.$interface,g=[],_=[],f=[];for(var $ in m)if(m.hasOwnProperty($)){if(!Aria.checkJsVarName($)||h[$]){this.$logError(this.INVALID_INTERFACE_MEMBER,[r,$]),m[$]=null,delete m[$];continue}var b=c.call(this,m[$],r,$);if(m[$]=b,null!=b)if("Function"==b.$type){var v=b.$callbackParam;null==v&&(v="null"),g.push("p.",$,"=function(){\nreturn i[this.",d,"].$call('",r,"','",$,"',arguments,",v,");\n}\n")}else"Interface"==b.$type?(_.push("this.",$,"=obj.",$,"?obj.",$,".$interface('",b.$classpath,"'):null;\n"),f.push("this.",$,"=null;\n")):"Object"==b.$type&&(_.push("this.",$,"=obj.",$,";\n"),f.push("this.",$,"=null;\n"));else this.$logError(this.INVALID_INTERFACE_MEMBER_DEF,[r,$]),delete m[$]}n.$events={};var y=!1;o?y=e(n.$events,o.prototype.$events,r):g.push("p.$interface=function(a){\nreturn aria.core.Interfaces.getInterface(i[this.",d,"],a,this);\n};\n"),e(n.$events,t.$events,r)&&!y&&(g.push("p.$addListeners=function(a){\nreturn i[this.",d,"].$addListeners(a,this);\n};\n"),g.push("p.$onOnce=function(a){\nreturn i[this.",d,"].$onOnce(a,this);\n};\n"),g.push("p.$removeListeners=function(a){\nreturn i[this.",d,"].$removeListeners(a,this);\n};\n"),g.push("p.$unregisterListeners=function(a){\nreturn i[this.",d,"].$unregisterListeners(a,this);\n};\n"),g.push("p.$on=p.$addListeners;\n")),g.push("p.$destructor=function(){\n",f.join(""),"i[this.",d,"]=null;\ndelete i[this.",d,"];\nthis.",d,"=null;\n",o?"e.prototype.$destructor.call(this);\n":"","};\n");var A=[],E={g:s,p:n,c:null,e:o};Aria.nspace(r,!0),A.push("var i={};\nvar evalContext=arguments[2];\nvar g=evalContext.g;\nvar p=evalContext.p;\nvar e=evalContext.e;\nevalContext.c=function(obj){\n",o?"e.call(this,obj);\n":"","var k=g(i);\ni[k]=obj;\nthis.",d,"=k;\n",_.join(""),"};\n",g.join(""),"Aria.$global.",r,"=evalContext.c;\n","p=null;\nevalContext=null;\n"),A=A.join(""),Aria.eval(A,r.replace(/\./g,"/")+"-wrapper.js",E);var C=E.c;n.$interfaces[r]=C,C.prototype=n,C.interfaceDefinition=t,C.superInterface=o,t.$noargConstructor=Function(),t.$noargConstructor.prototype=n,Aria.$classes.push(C),i.notifyClassLoad(r)},applyInterface:function(i,n){var a=n.$interfaces;if(a&&a[i])return!0;var s=Aria.getClassRef(i);if(!s.interfaceDefinition)return this.$logError(this.WRONG_INTERFACE,[i,n.$classpath]),!1;if(s.superInterface){if(!this.applyInterface(s.interfaceDefinition.$extends,n))return!1;a=n.$interfaces}n.hasOwnProperty("$interfaces")||(a=u(a),n.$interfaces=a),a[i]=s,e(n.$events,s.interfaceDefinition.$events,n.$classpath);var r=s.interfaceDefinition.$interface;for(var o in r)if(r.hasOwnProperty(o)&&"Function"==r[o].$type&&!t.isFunction(n[o]))return this.$logError(this.METHOD_NOT_IMPLEMENTED,[n.$classpath,o,i]),!1;return!0},getInterface:function(e,i,n){var a,s;t.isFunction(i)?(s=i,a=i.interfaceDefinition.$classpath):t.isString(i)&&(a=i);var r,o=e.__$interfaces;return null==n||n.$interfaces[a]?o&&(r=o[a])?r:e.$interfaces[a]?s||(s=Aria.getClassRef(a))?(o||(o={},e.__$interfaces=o),r=new s(e),o[a]=r,r):null:(this.$logError(this.INTERFACE_NOT_SUPPORTED,[a,e.$classpath]),null):(this.$logError(this.INTERFACE_NOT_SUPPORTED,[a,n.$classpath]),null)},disposeInterfaces:function(t){var e=t.__$interfaces;if(e){for(var i in e)e.hasOwnProperty(i)&&e[i].$destructor&&(e[i].$destructor(),e[i]=null);t.__$interfaces=null}}}})}(),Aria.interfaceDefinition({$classpath:"aria.core.transport.ITransports",$interface:{init:function(){},request:function(){}}}),Aria.classDefinition({$classpath:"aria.core.transport.BaseXHR",$implements:["aria.core.transport.ITransports"],$prototype:{_pollingInterval:50,isReady:!0,init:Aria.empty,request:function(t,e){var i=this._getConnection();i.open(t.method,t.url,!0);for(var n in t.headers)t.headers.hasOwnProperty(n)&&i.setRequestHeader(n,t.headers[n]);aria.core.IO.setTimeout(t.id,t.timeout,{fn:this.onAbort,scope:this,args:[t.id,i]}),this._handleReadyState(t.id,i,e),i.send(t.data||null)},_getConnection:function(){return this._standardXHR()||this._activeX()},_standardXHR:function(){try{var t=Aria.$global.XMLHttpRequest;return new t}catch(e){}},_activeX:function(){try{var t=Aria.$global.ActiveXObject;return new t("Microsoft.XMLHTTP")}catch(e){}},_handleReadyState:function(t,e,i){var n=aria.core.IO,a=this;n._poll[t]=setInterval(function(){e&&4===e.readyState&&(aria.core.IO.clearTimeout(t),clearInterval(n._poll[t]),delete n._poll[t],a._handleTransactionResponse(t,e,i))},this._pollingInterval)},_handleTransactionResponse:function(t,e,i){var n,a;try{var s=e.status;n=s?s||200:!s&&e.responseText?200:1223==s?204:13030}catch(r){n=13030}var o=!1;n>=200&&300>n?a=this._createResponse(e):(a={error:[n,e.statusText].join(" "),responseText:e.responseText,responseXML:e.responseXML},o=!0),a.status=n,i.fn.call(i.scope,o,i.args,a),e=null,a=null},_createResponse:function(t){var e=t.getAllResponseHeaders(),i={};if(e)for(var n=e.split("\n"),a=0;n.length>a;a++){var s=n[a].indexOf(":");-1!=s&&(i[n[a].substring(0,s)]=n[a].substring(s+2).replace(/^\s+|\s+$/g,""))}var r={statusText:1223==t.status?"No Content":t.statusText,getResponseHeader:i,getAllResponseHeaders:n,responseText:t.responseText,responseXML:t.responseXML};return r},onAbort:function(t,e){return clearInterval(aria.core.IO._poll[t]),delete aria.core.IO._poll[t],this._inProgress(e)?(e.abort(),!0):!1},_inProgress:function(t){return 4!==t.readyState&&0!==t.readyState}}}),Aria.classDefinition({$classpath:"aria.core.transport.XHR",$extends:"aria.core.transport.BaseXHR",$singleton:!0}),Aria.classDefinition({$classpath:"aria.core.transport.Local",$singleton:!0,$extends:"aria.core.transport.BaseXHR",$prototype:{request:function(t,e){return aria.core.Browser.isOpera?this._iFrameHack(t,e):(this.$BaseXHR.request.call(this,t,e),void 0)},_iFrameHack:function(t,e){var i=Aria.$frameworkWindow.document,n=i.createElement("iframe");n.src=t.url,n.id="xIFrame"+t.id,n.style.cssText="display:none",n.onload=n.onreadystatechange=function(t,a){if(a||!n.readyState||/loaded|complete/.test(n.readyState)){n.onload=n.onreadystatechange=null;var s;n.contentDocument?s=n.contentDocument.getElementsByTagName("body")[0].innerText:n.contentWindow&&(s=n.contentWindow.document.getElementsByTagName("body")[0].innerText),n.parentNode&&i.body.removeChild(n),n=void 0;var r={status:a?0:200,responseText:s};e.fn.call(e.scope,a,e.args,r)}},i.body.appendChild(n)},_getConnection:function(){return this._activeX()||this._standardXHR()}}}),function(){var t,e,i=aria.utils.Type,n=aria.utils.Array,a=function(i){return t||i.filterClasspath!==e?!0:(t=i,!1)},s=function(i){return t||i.obj!==e?!0:(t=i,!1)},r=function(i){return!t&&i.filterClasspath===e.classpath&&i.hasOwnProperty("initArgs")&&i.initArgs===e.initArgs?(t=i,!1):!0},o=function(n){return t=null,e=n,i.isString(n)?a:i.isInstanceOf(n,"aria.core.IOFilter")?s:i.isObject(n)?r:null},l=function(){e=null};Aria.classDefinition({$classpath:"aria.core.IOFiltersMgr",$singleton:!0,$constructor:function(){this._filters=null,this._filtersToBeLoaded=0},$destructor:function(){var t,e=this._filters;if(e){for(var i=0,n=e.length;n>i;i++)t=e[i],t.obj&&(t.obj.$dispose(),t.obj=null),t.initArgs=null;this._filters=null}},$statics:{INVALID_PARAMETER_FOR_ADDFILTER:"Invalid parameter for addFilter.",INVALID_PARAMETER_FOR_ISFILTERPRESENT:"Invalid parameter for isFilterPresent.",INVALID_PARAMETER_FOR_REMOVEFILTER:"Invalid parameter for removeFilter.",FILTER_INSTANCE_ALREADY_PRESENT:"The same instance of the filter was already added to the list of filters."},$prototype:{addFilter:function(t){var e={};if(i.isString(t))e.filterClasspath=t,e.initArgs=null,this._filtersToBeLoaded++;else if(i.isInstanceOf(t,"aria.core.IOFilter")){if(this.isFilterPresent(t))return this.$logError(this.FILTER_INSTANCE_ALREADY_PRESENT),!1;e.filterClasspath=t.$classpath,e.obj=t}else{if(!i.isObject(t))return this.$logError(this.INVALID_PARAMETER_FOR_ADDFILTER),!1;e.filterClasspath=t.classpath,e.initArgs=t.initArgs,this._filtersToBeLoaded++}return this._filters||(this._filters=[]),this._filters[this._filters.length]=e,!0},isFilterPresent:function(t){var e=this._filters;if(!e)return!1;var i=o(t);if(null==i)return this.$logError(this.INVALID_PARAMETER_FOR_ISFILTERPRESENT),l(),!1;for(var n=0,a=e.length;a>n;n++)if(!i(e[n]))return l(),!0;return l(),!1},removeFilter:function(e){var i=this._filters;if(!i)return!1;var a=o(e);if(null==a)return this.$logError(this.INVALID_PARAMETER_FOR_REMOVEFILTER),l(),!1;var s=n.filter(i,a,this);l();var r=t;return r?(r.obj?(r.obj.$dispose(),r.obj=null):this._filtersToBeLoaded--,r.filterClasspath=null,r.initArgs=null,this._filters=0===s.length?null:s,!0):!1},callFiltersOnRequest:function(t,e){this._callFilters(!1,t,e)},callFiltersOnResponse:function(t,e){this._callFilters(!0,t,e)},_callFilters:function(t,e,i){if(!this._filters)return this.$callback(i),void 0;var n={isResponse:t,request:e,cb:i,filters:this._filters,nbFilters:this._filters.length};this._filtersToBeLoaded>0&&(null==e.sender||"aria.core.FileLoader"!=e.sender.classpath)?this._loadMissingFilters({fn:this._continueCallingFilters,args:n,scope:this}):this._continueCallingFilters(null,n)},_continueCallingFilters:function(t,e){var i,n=e.filters,a=e.request;if(a.delay=0,e.isResponse)for(var s=e.nbFilters-1;s>=0;s--)i=n[s].obj,i&&i.__onResponse(a);else for(var s=0,r=e.nbFilters;r>s;s++)i=n[s].obj,i&&i.__onRequest(a);a.delay>0?aria.core.Timer.addCallback({fn:this._afterDelay,args:e,scope:this,delay:a.delay}):this._afterDelay(e)},_afterDelay:function(t){var e=t.request;delete e.delay,this.$callback(t.cb)},_loadMissingFilters:function(t){for(var e,i=this._filters,n=[],a=0,s=i.length;s>a;a++)e=i[a],null==e.obj&&n.push(e.filterClasspath);Aria.load({classes:n,oncomplete:{fn:this._continueLoadingMissingFilters,scope:this,args:{cb:t,filters:i,nbFilters:i.length}}})},_continueLoadingMissingFilters:function(t){for(var e=t.filters,i=0,n=t.nbFilters;n>i;i++){var a=e[i];null!=a.filterClasspath&&null==a.obj&&(a.obj=Aria.getClassInstance(a.filterClasspath,a.initArgs),this._filtersToBeLoaded--)}this.$callback(t.cb)}}})}(),Aria.classDefinition({$classpath:"aria.core.IO",$singleton:!0,$events:{request:"",response:"",startEvent:"",abortEvent:""},$statics:{COMM_CODE:0,ABORT_CODE:-1,ABORT_ERROR:"transaction aborted",TIMEOUT_ERROR:"timeout expired",MISSING_IO_CALLBACK:"Missing callback in IO call - Please check\nurl: %1",IO_CALLBACK_ERROR:"Error in IO callback handling on url: %1",IO_REQUEST_FAILED:"Invalid Request: \nurl: %1\nerror: %2",JSON_PARSING_ERROR:"Response text could not be evaluated as JSON.\nurl: %1\nresponse: %2",MISSING_FORM:"Missing form id or form object in asyncFormSubmit call - Please check the bean: aria.core.CfgBeans.IOAsyncRequestCfg."},$constructor:function(){this.pendingRequests={},this.nbRequests=0,this.nbOKResponses=0,this.nbKOResponses=0,this.trafficUp=0,this.trafficDown=0,this.defaultTimeout=6e4,this._uriScheme=/^([\w\+\.\-]+:)(?:\/\/)?(.*)/,this._uriLocal=/^(?:file):$/,this.useXHRHeader=!0,this.defaultXHRHeader="XMLHttpRequest",this.headers={"X-Requested-With":"XMLHttpRequest"},this.useDefaultPostHeader=!0,this.defaultPostHeader="application/x-www-form-urlencoded; charset=UTF-8",this.useDefaultContentTypeHeader=!0,this.defaultContentTypeHeader="application/x-www-form-urlencoded; charset=UTF-8",this._poll={},this._timeOut={},this.__sameDomain="aria.core.transport.XHR",this.__crossDomain="aria.core.transport.XDR",this.__jsonp="aria.core.transport.JsonP",this.__local="aria.core.transport.Local",this.__iframe="aria.core.transport.IFrame",this.__serializer=new aria.utils.json.JsonSerializer},$destructor:function(){var t;for(t in this._poll)this._poll.hasOwnProperty(t)&&clearInterval(this._poll[t]);for(t in this._timeOut)this._timeOut.hasOwnProperty(t)&&clearInterval(this._timeOut[t]);this.__serializer&&(this.__serializer.$dispose(),this.__serializer=null),this._poll=null,this._timeOut=null},$prototype:{asyncRequest:function(t){return this.__normalizeRequest(t),this.pendingRequests[t.id]=t,aria.core.IOFiltersMgr?aria.core.IOFiltersMgr.callFiltersOnRequest(t,{fn:this._afterRequestFilters,scope:this,args:t}):this._afterRequestFilters(null,t),t.id},asyncFormSubmit:function(t){var e;return aria.utils.Type.isHTMLElement(t.form)?e=t.form:aria.utils.Type.isString(t.formId)&&(e=Aria.$window.document.getElementById(t.formId)),e?(t.url||(t.url=e.action),t.method||(t.method=e.method),e.enctype&&!t.headers?t.headers={"Content-Type":e.enctype}:e.enctype&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]=e.enctype),t.form=e,t.formId=e.id,this.asyncRequest(t)):(this.$logError(this.MISSING_FORM),t.callback.onerror.call(t.callback.scope,t))},_afterRequestFilters:function(t,e){this.$raiseEvent({name:"request",req:e}),e.beginDownload=(new Date).getTime(),e.requestSize="POST"==e.method&&e.postData?e.postData.length:"POST"!=e.method&&"PUT"!=e.method||!e.data?0:e.data.length;try{this._prepareTransport(e)}catch(i){aria.core.Timer.addCallback({fn:this._handleResponse,scope:this,delay:10,args:{isInternalError:!0,reqId:e.id,errDescription:i.description||i.message||i.name+i.number}})}return e.id},__normalizeRequest:function(t){this.nbRequests++,t.id=this.nbRequests;var e=["GET","POST","PUT","DELETE","HEAD","TRACE","OPTIONS","CONNECT","PATCH","COPY","PROPFIND","MKCOL","PROPPATCH","MOVE","LOCK","UNLOCK","BIND","UNBIND","REBIND"];if(null==t.timeout&&(t.timeout=null==t.callback||null==t.callback.timeout?this.defaultTimeout:t.callback.timeout),t.method=t.method?t.method.toUpperCase():"GET",!aria.utils.Array.contains(e,t.method))return this.$logWarn("The request method %1 is invalid",[t.method]);var i={};for(var n in this.headers)this.headers.hasOwnProperty(n)&&(i[n]=this.headers[n]);for(var n in t.headers)t.headers.hasOwnProperty(n)&&(i[n]=t.headers[n]);if("POST"===t.method||"PUT"===t.method){var a=i["Content-Type"]||t.contentTypeHeader||t.postHeader;!a&&this.useDefaultPostHeader&&(a=this.defaultPostHeader),!a&&this.useDefaultContentTypeHeader&&(a=this.defaultContentTypeHeader),a&&(i["Content-Type"]=a)}this.useXHRHeader?i["X-Requested-With"]=this.defaultXHRHeader:delete i["X-Requested-With"],t.headers=i,t.data||(t.data=t.postData)},_prepareTransport:function(t){var e;e=t.jsonp?this.__jsonp:aria.utils.Type.isHTMLElement(t.form)?this.__iframe:this._getTransport(t.url,Aria.$frameworkWindow?Aria.$frameworkWindow.location:null);var i=Aria.getClassRef(e),n={req:t,transport:{classpath:e,instance:i}};i?this._asyncRequest(n):Aria.load({classes:[e],oncomplete:{fn:this._asyncRequest,args:n,scope:this}})},_getTransport:function(t,e){var i=this._uriScheme.exec(t.toLowerCase());if(i&&e){var n=i[1],a=i[2];if(this._uriLocal.test(n))return this.__local;if(n!=e.protocol||0!==a.indexOf(e.host))return this.__crossDomain}return this.__sameDomain},_asyncRequest:function(t){var e=t.req,i=e.id,n=t.transport.instance||Aria.getClassRef(t.transport.classpath),a={fn:this._handleResponse,scope:this,args:e};return n.isReady?(this.trafficUp+=e.requestSize,n.request(e,a),void 0):n.init(i,a)},_handleResponse:function(t,e,i){i||(i={}),!e&&t&&(e=this.pendingRequests[t.reqId]),this.clearTimeout(e.id),this._normalizeResponse(t,e,i),e.res=i,e.endDownload=(new Date).getTime(),e.downloadTime=e.endDownload-e.beginDownload,e.responseSize=i.responseText.length,this.trafficDown+=e.responseSize,this.$raiseEvent({name:"response",req:e}),delete this.pendingRequests[e.id],aria.core.IOFiltersMgr?aria.core.IOFiltersMgr.callFiltersOnResponse(e,{fn:this._afterResponseFilters,scope:this,args:e}):this._afterResponseFilters(null,e)},_normalizeResponse:function(t,e,i){i.reqId=e.id,i.url=e.url;var n=e.expectedResponseType;if(t){if(this.nbKOResponses++,i.responseText||(i.responseText=""),i.responseText&&"json"===n)try{i.responseJSON=this.__serializer.parse(i.responseText)}catch(a){this.$logWarn(this.JSON_PARSING_ERROR,[e.url,i.responseText])}i.error||(i.error=t===!0?t.statusText||"error":t.errDescription)}else this.nbOKResponses++,n&&this._jsonTextConverter(i,n),i.error=null},_afterResponseFilters:function(t,e){var i=e.res,n=e.callback;if(n)if(null!=i.error)if(null==n.onerror)this.$logError(this.IO_REQUEST_FAILED,[i.url,i.error]);else{var a=n.onerrorScope;a||(a=n.scope);try{n.onerror.call(a,i,n.args)}catch(s){this.$logError(this.IO_CALLBACK_ERROR,[i.url],s)}}else e.expectedResponseType&&this._jsonTextConverter(i,e.expectedResponseType),n.fn.call(n.scope,i,n.args);else this.$logError(this.MISSING_IO_CALLBACK,[i.url]);e=n=null},updateTransports:function(t){t.sameDomain&&(this.__sameDomain=t.sameDomain),t.crossDomain&&(this.__crossDomain=t.crossDomain),t.jsonp&&(this.__jsonp=t.jsonp),t.local&&(this.__local=t.local),t.iframe&&(this.__iframe=t.iframe)},getTransports:function(){return{sameDomain:this.__sameDomain,crossDomain:this.__crossDomain,jsonp:this.__jsonp,local:this.__local,iframe:this.__iframe}},setTimeout:function(t,e,i){e>0&&(this._timeOut[t]=setTimeout(function(){aria.core.IO._timeOut[t]&&aria.core.IO.abort({redId:t,getStatus:i},null,!0)},e))},clearTimeout:function(t){clearInterval(this._poll[t]),delete this._poll[t],clearTimeout(this._timeOut[t]),delete this._timeOut[t]},abort:function(t,e,i){if(!t)return!1;var n=t.redId||t,a=this.pendingRequests[n];this.clearTimeout(n);var s=!1;if(t.getStatus){var r=t.getStatus;s=r.fn.apply(r.scope,r.args)}if(a&&(s=!0,t===n?t={transaction:n}:t.transaction=n),s===!0){this.$raiseEvent({name:"abortEvent",o:t,req:a});var o={transaction:a.id,req:a,status:i?this.COMM_CODE:this.ABORT_CODE,statusText:i?this.TIMEOUT_ERROR:this.ABORT_ERROR};this._handleResponse(!0,a,o)}return s},jsonp:function(t){return t.jsonp||(t.jsonp="callback"),t.expectedResponseType||(t.expectedResponseType="json"),this.asyncRequest(t)},_jsonTextConverter:function(t,e){if("text"==e)t.responseText||null==t.responseJSON||(t.responseText=aria.utils.Type.isString(t.responseJSON)?t.responseJSON:aria.utils.Json.convertToJsonString(t.responseJSON));
else if("json"==e&&null==t.responseJSON&&null!=t.responseText){var i=aria.utils.String.substitute(this.JSON_PARSING_ERROR,[t.url,t.responseText]);t.responseJSON=aria.utils.Json.load(t.responseText,this,i)}},reissue:function(t){var e=this.pendingRequests[t];return e?(delete this.pendingRequests[t],this.asyncRequest(e)):void 0}}}),Aria.classDefinition({$classpath:"aria.core.MultiLoader",$constructor:function(t,e){this._autoDispose=e!==!1,this._loadDesc=t,this._clsLoader=null},$statics:{MULTILOADER_CB1_ERROR:"Error detected while executing synchronous callback on MultiLoader.",MULTILOADER_CB2_ERROR:"Error detected while executing callback on MultiLoader."},$prototype:{load:function(){var t=aria.core.ClassMgr,e=this._loadDesc,i=!1,n=!0,a={JS:t.filterMissingDependencies(e.classes),TPL:t.filterMissingDependencies(e.templates),RES:t.filterMissingDependencies(e.resources,"RES"),CSS:t.filterMissingDependencies(e.css),TML:t.filterMissingDependencies(e.tml),TXT:t.filterMissingDependencies(e.txt),CML:t.filterMissingDependencies(e.cml)};for(var s in a)if(a.hasOwnProperty(s)){var r=a[s];i=i||r===!1,n=n&&null===r}if(i||n)this._execCallback(!0,i);else{var o=new aria.core.ClassLoader;this._loadDesc.onerror&&this._loadDesc.onerror.override&&(o.handleError=!1),this._clsLoader=o,o.$on({classReady:this._onClassesReady,classError:this._onClassesError,complete:this._onClassLoaderComplete,scope:this});for(s in a)a.hasOwnProperty(s)&&(r=a[s],r&&o.addDependencies(r,s));o.loadDependencies()}},_execCallback:function(t,e){var i=this._loadDesc[e?"onerror":"oncomplete"];if(i){"function"==typeof i&&(i={fn:i});var n=i.scope?i.scope:Aria;try{i.fn.call(n,i.args)}catch(a){var s=t?this.MULTILOADER_CB1_ERROR:this.MULTILOADER_CB2_ERROR;this.$logError(s,null,a)}}t&&this._autoDispose&&this.$dispose()},_onClassesReady:function(){this._execCallback(!1,!1)},_onClassesError:function(){this._execCallback(!1,!0)},_onClassLoaderComplete:function(t){var e=t.src;this.$assert(90,this._clsLoader===e),this._clsLoader=null,e.$dispose(),this._autoDispose&&this.$dispose()}}}),function(){var t=aria.utils.Json,e=aria.utils.Type;Aria.classDefinition({$classpath:"aria.core.JsonValidator",$dependencies:["aria.utils.Json","aria.utils.Type"],$singleton:!0,$constructor:function(){this.__waitingBeans={},this.__loadedBeans={},this.__processedBeans={},this.__baseTypes={},this._options={addDefaults:!0,checkEnabled:Aria.debug,checkDefaults:!0,checkMultiTypes:!1,checkInheritance:!0,checkBeans:!0,throwsErrors:!1},this._errors=[],this._currentBeanName="JSON root",this._typeBeingComputed={typeName:"typeBeingComputed"},this._typeError={typeName:"typeError"},this._typeRefError={},this._typeRefError[this._MD_BUILTIN]=!0,this._typeRefError[this._MD_BASETYPE]=this._typeError},$destructor:function(){this.__waitingBeans=null,this.__loadedBeans=null},$statics:{INVALID_TYPE_NAME:"Invalid or missing $type in %1: %2",INVALID_TYPE_REF:"Type %1, found in %2, is not defined in package %3",UNDEFINED_PREFIX:"Prefix %1, found in %2, is not defined",MISSING_BEANSPACKAGE:"Beans package %1, referenced in %2, was not found",RECURSIVE_BEAN:"Recursive bean definition in %1",BOTH_MANDATORY_DEFAULT:"$mandatory=true and $default should not be specified at the same time in %1",INHERITANCE_EXPECTED:"Type %1 should inherit from %2",MISSING_CONTENTTYPE:"Missing $contentType in the %1 definition in %2",ENUM_DUPLICATED_VALUE:"Duplicated value '%1' in enum definition %2",ENUM_INVALID_INHERITANCE:"Value '%1', from %2, is not present in parent enum definition %3",INVALID_DEFAULTVALUE:"Default value %1 in %2 is invalid: %3",BEANCHECK_FAILED:"Checking bean definition %1 with beans schema failed: %2",MISSING_ENUMVALUES:"$enumValues must be defined and non-empty in the Enum definition in %1",INVALID_NAME:"Invalid name for a bean: %1 in %2",NUMBER_INVALID_INHERITANCE:"Invalid inheritance: %1 in %2 should respect its parent range",NUMBER_INVALID_RANGE:"Invalid range in %1: %2-%3",BEAN_NOT_FOUND:"Bean %1 was not found",INVALID_CONFIGURATION:"%1 configuration is not valid.",INVALID_TYPE_VALUE:"Invalid type: expected type %1 (from %2), found incorrect value '%3' in %4",INVALID_MULTITYPES_VALUE:"The value found in %1 is not valid for all the types defined in %2: %3",ENUM_UNKNOWN_VALUE:"Value '%1' in %2 is not in the enum definition %3",UNDEFINED_PROPERTY:"Property '%1', used in %2, is not defined in %3",MISSING_MANDATORY:"Missing mandatory attribute in %1 for definition %2",REGEXP_FAILED:"Value '%1' in %2 does not comply with RegExp %3 in %4",NUMBER_RANGE:"Number '%1' in %2 is not in the accepted range (%3=%4)",NOT_OF_SPECIFIED_CLASSPATH:"Invalid class instance: expected instance of class %1 (from %2), found incorrect value '%3' in %4"},$prototype:{_MD_TYPENAME:Aria.FRAMEWORK_PREFIX+"typeName",_MD_BASETYPE:Aria.FRAMEWORK_PREFIX+"baseType",_MD_PARENTDEF:Aria.FRAMEWORK_PREFIX+"parentType",_MD_BUILTIN:Aria.FRAMEWORK_PREFIX+"builtIn",_MD_ENUMVALUESMAP:Aria.FRAMEWORK_PREFIX+"enumValuesMap",_MD_STRDEFAULT:Aria.FRAMEWORK_PREFIX+"strDefault",_BASE_TYPES_PACKAGE:"aria.core.JsonTypes",_BEANS_SCHEMA_PACKAGE:"aria.core.BaseTypes",_logError:function(t,e){this._errors.push({msgId:t,msgArgs:e})},__logAllErrors:function(t,e){if(0===t.length)return!0;if(e){var i=Error();throw i.errors=t,i}for(var n=0;t.length>n;n++)this.$logError(t[n].msgId,t[n].msgArgs);return!1},__findTypeInBP:function(t,e){for(var i={$properties:t.$beans},n=e.split("."),a=0;n.length>a;a++){var s=n[a];if(i="$contentType"==s&&i.$contentType?i.$contentType:"object"==typeof i.$properties&&null!=i.$properties?i.$properties[s]:null,"object"!=typeof i||null==i)return this._logError(this.INVALID_TYPE_REF,[e,this._currentBeanName,t.$package]),this._typeRefError}return i},__getTypeRef:function(t,e){var i,n,a=t.indexOf(":");if(-1==a)i=e.$package,n=e;else{var s=t.substr(0,a);if(t=t.substr(a+1),i=null==e.$namespaces?null:e.$namespaces[s],!i)return this._logError(this.UNDEFINED_PREFIX,[s,this._currentBeanName]),this._typeRefError}var r=i+"."+t,o=this.__processedBeans[r];return o?o:n||(n=this.__loadedBeans[i])?(o=this.__findTypeInBP(n,t),o==this._typeError||o[this._MD_TYPENAME]||(o[this._MD_TYPENAME]=r),o):(this._logError(this.MISSING_BEANSPACKAGE,[i,this._currentBeanName]),this._typeRefError)},_preprocessBean:function(i,n,a){this._currentBeanName=n;var s=i[this._MD_BASETYPE];if(s)return s;i[this._MD_TYPENAME]=n,i[this._MD_BASETYPE]=this._typeBeingComputed;var r=i.$type,o=this._typeRefError;if("string"!=typeof r||!r)return this._logError(this.INVALID_TYPE_NAME,[i[this._MD_TYPENAME],r]),this._typeError;if(o=this.__getTypeRef(r,a),i[this._MD_PARENTDEF]=o,r=o[this._MD_TYPENAME],s=this._preprocessBean(o,r,a),s==this._typeBeingComputed)return a.$package==this._BASE_TYPES_PACKAGE?this._getBuiltInBaseType(i):(this._logError(this.RECURSIVE_BEAN,i[this._MD_TYPENAME]),this._typeError);i[this._MD_BASETYPE]=s,this.__checkBean(i)||(i[this._MD_BASETYPE]=this._typeError),i.$description||o[this._MD_BUILTIN]||(i.$description=o.$description);var l=!("$default"in i),c=!("$mandatory"in i);if(l&&c&&(i.$mandatory=!1,c=!1),c&&(i.$mandatory=o.$mandatory),l&&"$default"in o&&!i.$mandatory&&(i.$default=t.copy(o.$default)),s&&s.preprocess&&s.preprocess(i,n,a),i[this._MD_BASETYPE]==this._typeError)return this._typeError;if(s&&s.makeFastNorm&&!i.$fastNorm&&(i.$getDefault=Aria.returnNull,s.makeFastNorm(i)),"$default"in i){if(i.$mandatory===!0)return this._logError(this.BOTH_MANDATORY_DEFAULT,i[this._MD_TYPENAME]),this._typeError;if(this._options.checkDefaults){var u=this._errors;this._errors=[];var h=this._processJsonValidation({beanDef:i,json:i.$default});if(this._errors=u,h.length>0)return this._logError(this.INVALID_DEFAULTVALUE,[i.$default,i[this._MD_TYPENAME],h]),this._typeError}var p=i.$default;"$simpleCopyType"in i||(i.$simpleCopyType=!p||e.isString(p)||e.isNumber(p)||p===!0),i.$strDefault||(i.$strDefault=t.convertToJsonString(p,{reversible:!0}),i.$fastNorm&&(i.$getDefault=Function("return "+i.$strDefault+";")))}return this.__processedBeans[n]=i,s},__preprocessBP:function(t){this._errors=[];var e=t.$beans;for(var i in e)e.hasOwnProperty(i)&&-1==i.indexOf(":")&&(Aria.checkJsVarName(i)||this._logError(this.INVALID_NAME,[i,this._currentBeanName]),this._preprocessBean(e[i],t.$package+"."+i,t));return this._errors},_getBuiltInBaseType:function(t){var e=this.__baseTypes[t.$type];this.$assert(298,null!=e),t[this._MD_BUILTIN]=!0,t[this._MD_BASETYPE]=e,t[this._MD_TYPENAME]=[this._BASE_TYPES_PACKAGE,e.typeName].join(".")},_addBaseType:function(t){this.__baseTypes[t.typeName]=t,t.dontSkip||this._options.checkEnabled||(t.process=null,t.preprocess=null)},_checkType:function(e){var i=e.beanDef,n=i[this._MD_BASETYPE];return null==e.value?(i.$mandatory?this._logError(this.MISSING_MANDATORY,[e.path,i[this._MD_TYPENAME]]):"$default"in i&&this._options.addDefaults&&(e.value=i.$simpleCopyType?i.$default:t.copy(i.$default),e.dataHolder[e.dataName]=e.value),void 0):(n.process&&n.process(e),void 0)},_getBean:function(t){return this.__processedBeans[t]||null},_processJsonValidation:function(t){var e=t.beanDef?t.beanDef:this._getBean(t.beanName);if(!e)return this._errors=[],this._logError(this.BEAN_NOT_FOUND,t.beanName),this._errors;if(this._options.checkEnabled){this._errors=[],this._checkType({dataHolder:t,dataName:"json",path:"ROOT",value:t.json,beanDef:e});var i=this._errors;return i}return e.$fastNorm&&(t.json=e.$fastNorm(t.json)),[]},__checkBean:function(t){if(this._options.checkBeans&&!this._options.checkMultiTypes&&this.__loadedBeans[this._BEANS_SCHEMA_PACKAGE]){var e=t[this._MD_BASETYPE];if(e==this._typeError)return!1;var i=this._getBean(this._BEANS_SCHEMA_PACKAGE+"."+e.typeName);this.$assert(402,null!=i);var n=this._errors,a=this._processJsonValidation({beanDef:i,json:t});if(this._errors=n,a.length>0)return this._logError(this.BEANCHECK_FAILED,[this._currentBeanName,a]),!1}return!0},__loadBeans:function(t){var e=!0,i=this.__waitingBeans[t];if(delete this.__waitingBeans[t],this.$assert(58,i),this._options.checkBeans&&this.__loadedBeans[this._BEANS_SCHEMA_PACKAGE]){var n=this._getBean(this._BEANS_SCHEMA_PACKAGE+".Package");this.$assert(428,null!=n),e=e&&this.__logAllErrors(this._processJsonValidation({beanDef:n,json:i}))}this._options.addDefaults=!0,e=e&&this.__logAllErrors(this.__preprocessBP(i)),e?(this.__loadedBeans[t]=i,aria.core.ClassMgr.notifyClassLoad(t)):aria.core.ClassMgr.notifyClassLoadError(t)},beanDefinitions:function(t){var e=t.$package;Aria.$classes.push({$classpath:e}),this.__waitingBeans[e]=t;var i=[];this._options.checkBeans&&!this.__loadedBeans[this._BEANS_SCHEMA_PACKAGE]&&e!=this._BEANS_SCHEMA_PACKAGE&&e!=this._BASE_TYPES_PACKAGE&&i.push(this._BEANS_SCHEMA_PACKAGE);var n=t.$dependencies||[];n.length&&(i=i.concat(n));for(var a in t.$namespaces)t.$namespaces.hasOwnProperty(a)&&i.push(t.$namespaces[a]);var s={JS:i},r=aria.core.ClassMgr.loadClassDependencies(e,s,{fn:this.__loadBeans,scope:this,args:e});r&&this.__loadBeans(e)},normalize:function(t,e){return this._options.addDefaults=!0,t.beanDef=null,this.__logAllErrors(this._processJsonValidation(t),e)},check:function(t,e,i){return this._options.checkEnabled?(this._options.addDefaults=!1,this.__logAllErrors(this._processJsonValidation({json:t,beanName:e}),i)):!0},validateCfg:function(t,e,i){var n=!1;try{n=this.normalize({json:e,beanName:t},!0)}catch(a){var s=aria.core.Log;if(s){for(var r,o=a.errors,l=0,c=o.length;c>l;l++)r=o[l],r.message=s.prepareLoggedMessage(r.msgId,r.msgArgs);i=i||{msg:this.INVALID_CONFIGURATION,params:[t]},this.$logError(i.msg,i.params,a)}}return n},getBean:function(t){return this._getBean(t)}}})}(),function(){var t,e,i=function(e,i){t._logError(t.INVALID_TYPE_VALUE,[e.typeName,i.beanDef[t._MD_TYPENAME],i.value,i.path])},n=function(e,i){if(!t._options.checkInheritance)return!0;for(var n=i;!n[t._MD_BUILTIN];){if(e==n)return!0;n=n[t._MD_PARENTDEF]}return t._logError(t.INHERITANCE_EXPECTED,[i[t._MD_TYPENAME],e[t._MD_TYPENAME]]),!1},a=function(e,i,a){var s=e.$contentType,r=null,o=e[t._MD_PARENTDEF];if(o[t._MD_BUILTIN]){if(null==s)return t._logError(t.MISSING_CONTENTTYPE,[e[t._MD_BASETYPE].typeName,e[t._MD_TYPENAME]]),e[t._MD_BASETYPE]=t._typeError,void 0}else if(r=o.$contentType,null==s)return e.$contentType=r,void 0;t._preprocessBean(s,i+".$contentType",a),null!=r&&n(r,s)},s=function(e,i,a){var s=e.$keyType,r=null,o=e[t._MD_PARENTDEF];if(o[t._MD_BUILTIN]){if(null==s)return}else if(r=o.$keyType,null==s)return e.$keyType=r,void 0;return t._preprocessBean(s,i+".$keyType",a),null!=r&&n(r,s),"String"!=s[t._MD_BASETYPE].typeName?(t._logError(t.INHERITANCE_EXPECTED,[s[t._MD_TYPENAME],t._BASE_TYPES_PACKAGE+".String"]),void 0):void 0},r=function(e){if("string"!=typeof e.value)return i(this,e);for(var n=e.beanDef;!n[t._MD_BUILTIN];){var a=n.$regExp;if(null!=a&&!a.test(e.value))return t._logError(t.REGEXP_FAILED,[e.value,e.path,a,n[t._MD_TYPENAME]]);n=n[t._MD_PARENTDEF]}},o=function(e){var i=e[t._MD_PARENTDEF];i.$minValue!==void 0&&(e.$minValue===void 0?e.$minValue=i.$minValue:e.$minValue<i.$minValue&&t._logError(t.NUMBER_INVALID_INHERITANCE,["$minValue",e[t._MD_TYPENAME]])),i.$maxValue!==void 0&&(e.$maxValue===void 0?e.$maxValue=i.$maxValue:e.$maxValue>i.$maxValue&&t._logError(t.NUMBER_INVALID_INHERITANCE,["$maxValue",e[t._MD_TYPENAME]])),e.$minValue!==void 0&&e.$maxValue!==void 0&&e.$minValue>e.$maxValue&&t._logError(t.NUMBER_INVALID_RANGE,[e[t._MD_TYPENAME],e.$minValue,e.$maxValue])},l=function(e){var n=e.value,a=e.beanDef;return"number"!=typeof n?i(this,e):a.$minValue!==void 0&&a.$minValue>n?t._logError(t.NUMBER_RANGE,[e.value,e.path,"$minValue",a.$minValue]):a.$maxValue!==void 0&&n>a.$maxValue?t._logError(t.NUMBER_RANGE,[e.value,e.path,"$maxValue",a.$maxValue]):void 0},c=[{typeName:"String",process:r},{typeName:"Boolean",process:function(t){return"boolean"!=typeof t.value?i(this,t):void 0}},{typeName:"JsonProperty",process:function(t){if("string"==typeof t.value){if(Aria.isJsReservedWord(t.value)||!/^([a-zA-Z_\$][\w\$]*(:[\w\$]*)?)|(\d+)$/.test(t.value))return i(this,t)}else if("number"!=typeof t.value||parseInt(t.value,10)!=t.value)return i(this,t)}},{typeName:"FunctionRef",process:function(t){return"function"!=typeof t.value?i(this,t):void 0}},{typeName:"Date",process:function(t){return isNaN(Date.parse(t.value))?i(this,t):void 0}},{typeName:"RegExp",process:function(t){var e=t.value;return"object"!=typeof e&&"function"!=typeof e||null==e||e.constructor!=RegExp?i(this,t):void 0}},{typeName:"ObjectRef",process:function(n){if("object"!=typeof n.value||null==n.value)return i(this,n);var a=n.beanDef.$classpath;return a&&!e.isInstanceOf(n.value,a)?(t._logError(t.NOT_OF_SPECIFIED_CLASSPATH,[a,n.beanDef[t._MD_TYPENAME],n.value,n.path]),void 0):void 0}},{typeName:"Integer",preprocess:o,process:function(t){return parseInt(t.value,10)!==t.value?i(this,t):(l.call(this,t),void 0)}},{typeName:"Float",preprocess:o,process:l},{typeName:"Enum",preprocess:function(e){var i=e.$enumValues,n=e[t._MD_PARENTDEF],a=null;if(n[t._MD_BUILTIN])(null==i||0===i.length)&&(i=[],t._logError(t.MISSING_ENUMVALUES,[e[t._MD_TYPENAME]]));else if(a=n[t._MD_ENUMVALUESMAP],null==i)return e[t._MD_ENUMVALUESMAP]=a,void 0;for(var s={},r=0;i.length>r;r++){var o=i[r];1==s[o]?t._logError(t.ENUM_DUPLICATED_VALUE,[o,e[t._MD_TYPENAME]]):a&&1!=a[o]?t._logError(t.ENUM_INVALID_INHERITANCE,[o,e[t._MD_TYPENAME],n[t._MD_TYPENAME]]):s[o]=1}e[t._MD_ENUMVALUESMAP]=s},process:function(e){if("string"!=typeof e.value)return i(this,e);var n=e.beanDef[t._MD_ENUMVALUESMAP];1!=n[e.value]&&t._logError(t.ENUM_UNKNOWN_VALUE,[e.value,e.path,e.beanDef[t._MD_TYPENAME]])}},{typeName:"Object",dontSkip:!0,preprocess:function(e,i,a){var s=e.$properties;s||(s={},e.$properties=s);var r=e[t._MD_PARENTDEF];e.$restricted=e.$restricted===!1?!1:r.$restricted!==!1;var o=r.$properties;for(var l in o)if(o.hasOwnProperty(l)&&-1==l.indexOf(":")&&"_"!=l.charAt(0)){var c=o[l],u=s[l];u?(t._preprocessBean(u,i+".$properties."+l,a),c&&n(c,u)):s[l]=c}for(var h in s)s.hasOwnProperty(h)&&-1==h.indexOf(":")&&"_"!=h.charAt(0)&&(Aria.checkJsVarName(h)||t._logError(t.INVALID_NAME,[h,t._currentBeanName]),t._preprocessBean(s[h],i+".$properties."+h,a))},process:function(e){var n=e.value,a=e.beanDef;if("object"!=typeof n||null==n)return i(this,e);var s=a.$properties,r={};if(t._options.checkEnabled&&a.$restricted)for(var o in n)n.hasOwnProperty(o)&&-1==o.indexOf(":")&&"_"!=o.charAt(0)&&(r[o]=1);for(var o in s)if(s.hasOwnProperty(o)&&-1==o.indexOf(":")&&"_"!=o.charAt(0)){var l=s[o];delete r[o],t._checkType({dataHolder:n,dataName:o,value:n[o],beanDef:l,path:e.path+'["'+o+'"]'})}if(t._options.checkEnabled&&a.$restricted)for(var o in r)n.hasOwnProperty(o)&&1==r[o]&&t._logError(t.UNDEFINED_PROPERTY,[o,e.path,a[t._MD_TYPENAME]])},makeFastNorm:function(t){var e=["var beanProperties = this.$properties;"];e.push("if (!obj) { return this.$getDefault(); }");var i=t.$properties,n=!1;for(var a in i)if(i.hasOwnProperty(a)&&-1==a.indexOf(":")&&"_"!=a.charAt(0)){var s=i[a];"$strDefault"in s?(n=!0,e.push("if (obj['"+a+"'] == null) { obj['"+a+"']  = "+s.$strDefault+"}"),s.$fastNorm&&e.push("else { beanProperties['"+a+"'].$fastNorm(obj['"+a+"']); }")):s.$fastNorm&&(n=!0,e.push("if (obj['"+a+"'] != null) { beanProperties['"+a+"'].$fastNorm(obj['"+a+"']);}"))}e.push("return obj;"),t.$fastNorm=n?Function("obj",e.join("\n")):u.emptyObject}},{typeName:"Array",dontSkip:!0,preprocess:a,process:function(e){var n=e.value;if("object"!=typeof n||null==n||n.constructor!=Array)return i(this,e);for(var a=e.beanDef.$contentType,s=0;n.length>s;s++)t._checkType({dataHolder:n,dataName:s,value:n[s],beanDef:a,path:e.path+'["'+s+'"]'})},makeFastNorm:function(t){t.$contentType.$fastNorm&&(t.$fastNorm=u.array)}},{typeName:"Map",dontSkip:!0,preprocess:function(t,e,i){a(t,e,i),s(t,e,i)},process:function(e){var n=e.value;if("object"!=typeof n||null==n)return i(this,e);var a=e.beanDef.$contentType,s=e.beanDef.$keyType;for(var r in n)n.hasOwnProperty(r)&&(s&&t._checkType({dataHolder:n,dataName:null,value:r,beanDef:s,path:e.path}),t._checkType({dataHolder:n,dataName:r,value:n[r],beanDef:a,path:e.path+'["'+r+'"]'}))},makeFastNorm:function(t){t.$contentType.$fastNorm&&(t.$fastNorm=u.map)}},{typeName:"MultiTypes",preprocess:function(e,i,n){var a=e.$contentTypes,s=e[t._MD_PARENTDEF];if(!s[t._MD_BUILTIN]&&null==a)return e.$contentTypes=s.$contentTypes,void 0;if(null!=a)for(var r=0;a.length>r;r++)t._preprocessBean(a[r],i+".$contentTypes["+r+"]",n)},process:function(e){if(t._options.checkMultiTypes){var i=e.beanDef.$contentTypes;if(null!=i){for(var n=t._errors,a=[],s=0;i.length>s;s++){var r=i[s];if(t._errors=[],t._checkType({dataHolder:e.dataHolder,dataName:e.dataName,value:e.value,beanDef:r,path:e.path}),0===t._errors.length)return t._errors=n,void 0;a.push({beanDef:r,errors:t._errors})}t._errors=n,t._logError(t.INVALID_MULTITYPES_VALUE,[e.path,e.beanDef[t._MD_TYPENAME],a])}}}}],u={emptyObject:function(t){return t?t:this.$getDefault()},array:function(t){if(!t)return this.$getDefault();for(var e=0,i=t.length;i>e;e++)this.$contentType.$fastNorm(t[e]);return t},map:function(t){if(!t)return this.$getDefault();for(var e in t)t.hasOwnProperty(e)&&this.$contentType.$fastNorm(t[e]);return t}};Aria.classDefinition({$classpath:"aria.core.JsonTypesCheck",$singleton:!0,$constructor:function(){t=aria.core.JsonValidator,e=aria.utils.Type;for(var i=0,n=c.length;n>i;i++)t._addBaseType(c[i])},$destructor:function(){t=null,e=null},$prototype:{}})}(),Aria.beanDefinitions({$package:"aria.core.JsonTypes",$beans:{String:{$type:"String",$sample:"Some text\non 2 lines!"},Boolean:{$type:"Boolean",$sample:!0},Integer:{$type:"Integer",$sample:186},Float:{$type:"Float",$sample:18.6},Date:{$type:"Date",$sample:"12/13/2009"},RegExp:{$type:"RegExp",$sample:/^\w([\w\.]*\w)?$/},ObjectRef:{$type:"ObjectRef"},FunctionRef:{$type:"FunctionRef"},JsonProperty:{$type:"JsonProperty",$sample:"name"},Enum:{$type:"Enum"},Object:{$type:"Object"},Array:{$type:"Array"},Map:{$type:"Map"},MultiTypes:{$type:"MultiTypes"},PackageName:{$type:"String",$sample:"aria.core.JsonTypes",$regExp:/^([a-zA-Z_\$][\w\$]*($|\.(?=.)))+$/}}}),Aria.beanDefinitions({$package:"aria.core.BaseTypes",$namespaces:{json:"aria.core.JsonTypes"},$beans:{Package:{$type:"json:Object",$properties:{$package:{$type:"json:PackageName",$mandatory:!0},$description:{$type:"json:String"},$dependencies:{$type:"json:Array",$contentType:{$type:"json:String"}},$namespaces:{$type:"json:Map",$contentType:{$type:"json:PackageName",$mandatory:!0}},$beans:{$type:"json:Map",$mandatory:!0,$contentType:{$type:"Bean",$mandatory:!0}}}},ElementType:{$type:"json:String",$mandatory:!0,$regExp:/^([a-zA-Z_\$][\w\$]*:)?([a-zA-Z_\$][\w\$]*($|\.))+$/,$sample:"json:Boolean"},Bean:{$type:"json:MultiTypes",$contentTypes:[{$type:"String"},{$type:"Boolean"},{$type:"Integer"},{$type:"Float"},{$type:"Date"},{$type:"RegExp"},{$type:"ObjectRef"},{$type:"FunctionRef"},{$type:"Enum"},{$type:"Object"},{$type:"Array"},{$type:"Map"},{$type:"MultiTypes"}]},Element:{$type:"json:Object",$properties:{$description:{$type:"json:String",$mandatory:!1},$type:{$type:"ElementType",$mandatory:!0},$sample:{$type:"json:MultiTypes",$mandatory:!1},$default:{$type:"json:MultiTypes",$mandatory:!1},$mandatory:{$type:"json:Boolean",$mandatory:!1}}},String:{$type:"Element",$properties:{$regExp:{$type:"json:RegExp"}}},Boolean:{$type:"Element"},Integer:{$type:"Element",$properties:{$minValue:{$type:"json:Integer"},$maxValue:{$type:"json:Integer"}}},Float:{$type:"Element",$properties:{$minValue:{$type:"json:Float"},$maxValue:{$type:"json:Float"}}},Date:{$type:"Element"},RegExp:{$type:"Element"},ObjectRef:{$type:"Element",$properties:{$classpath:{$type:"json:PackageName"}}},FunctionRef:{$type:"Element"},JsonProperty:{$type:"Element"},Enum:{$type:"Element",$properties:{$enumValues:{$type:"json:Array",$contentType:{$type:"json:String",$mandatory:!0}}}},Object:{$type:"Element",$properties:{$properties:{$type:"json:Map",$contentType:{$type:"Bean",$mandatory:!0}},$restricted:{$type:"json:Boolean",$default:!0},$fastNorm:{$type:"json:FunctionRef"},$getDefault:{$type:"json:FunctionRef"}}},Array:{$type:"Element",$properties:{$contentType:{$type:"Bean"},$fastNorm:{$type:"json:FunctionRef"},$getDefault:{$type:"json:FunctionRef"}}},Map:{$type:"Element",$properties:{$contentType:{$type:"Bean"},$keyType:{$type:"Bean"},$fastNorm:{$type:"json:FunctionRef"},$getDefault:{$type:"json:FunctionRef"}}},MultiTypes:{$type:"Element",$properties:{$contentTypes:{$type:"json:Array",$contentType:{$type:"Bean",$mandatory:!0}}}}}}),Aria.beanDefinitions({$package:"aria.core.CfgBeans",$namespaces:{json:"aria.core.JsonTypes"},$beans:{ClassDefinitionCfg:{$type:"json:Object",$properties:{$classpath:{$type:"json:PackageName",$mandatory:!0,$sample:"aria.jsunit.TestSuite"},$singleton:{$type:"json:Boolean",$default:!1},$extends:{$type:"json:PackageName",$default:"aria.core.JsObject"},$implements:{$type:"json:Array",$default:[],$contentType:{$type:"json:PackageName"}},$dependencies:{$type:"json:Array",$default:[],$contentType:{$type:"json:PackageName"}},$resources:{$type:"json:Map",$contentType:{$type:"json:MultiTypes",$sample:"aria.widgets.WidgetsRes",$contentTypes:[{$type:"json:Object"},{$type:"json:String"}]}},$templates:{$type:"json:Array",$contentType:{$type:"json:PackageName"}},$css:{$type:"json:Array",$contentType:{$type:"json:PackageName"}},$macrolibs:{$type:"json:Array",$contentType:{$type:"json:PackageName",$mandatory:!0}},$csslibs:{$type:"json:Array",$contentType:{$type:"json:PackageName",$mandatory:!0}},$texts:{$type:"json:Map",$contentType:{$type:"json:PackageName",$mandatory:!0}},$statics:{$type:"json:Map",$contentType:{$type:"json:MultiTypes"}},$prototype:{$type:"json:MultiTypes",$contentTypes:[{$type:"json:Map",$contentType:{$type:"json:MultiTypes"}},{$type:"json:FunctionRef"}]},$constructor:{$type:"json:FunctionRef",$mandatory:!0},$destructor:{$type:"json:FunctionRef"},$onload:{$type:"json:FunctionRef"},$events:{$type:"json:Map",$contentType:{$type:"json:MultiTypes",$contentTypes:[{$type:"json:Object"},{$type:"json:String"}]}},$beans:{$type:"json:Map",$contentType:{$type:"json:MultiTypes"}}}},ItfBaseMemberCfg:{$type:"json:Object",$properties:{$type:{$type:"json:Enum",$enumValues:["Function","Object","Interface"]}}},ItfMemberFunctionCfg:{$type:"ItfBaseMemberCfg",$properties:{$callbackParam:{$type:"json:Integer"}}},ItfMemberObjectCfg:{$type:"ItfBaseMemberCfg",$properties:{}},ItfMemberInterfaceCfg:{$type:"ItfBaseMemberCfg",$properties:{$classpath:{$type:"json:PackageName",$mandatory:!0}}},IOAsyncRequestCfg:{$type:"json:Object",$properties:{sender:{$type:"json:Object",$restricted:!1,$mandatory:!1,$properties:{classpath:{$type:"json:PackageName",$mandatory:!0}}},url:{$type:"json:String"},jsonp:{$type:"json:String",$sample:"callback"},method:{$type:"json:Enum",$default:"GET",$enumValues:["GET","POST","PUT","DELETE","HEAD","TRACE","OPTIONS","CONNECT","PATCH","COPY","PROPFIND","MKCOL","PROPPATCH","MOVE","LOCK","UNLOCK","BIND","UNBIND","REBIND"],$sample:"POST"},postData:{$type:"json:String"},data:{$type:"json:String"},postHeader:{$type:"json:String",$default:"application/x-www-form-urlencoded; charset=UTF-8"},contentTypeHeader:{$type:"json:String",$default:"application/x-www-form-urlencoded; charset=UTF-8"},headers:{$type:"json:Object",$sample:"{'Content-Type' : 'text/plain', 'Connection' : 'keep-alive'}",$restricted:!1},timeout:{$type:"json:Integer"},expectedResponseType:{$type:"json:Enum",$enumValues:["text","json","xml"]},callback:{$type:"json:Object",$properties:{fn:{$type:"json:FunctionRef"},scope:{$type:"json:ObjectRef"},onerror:{$type:"json:FunctionRef"},onerrorScope:{$type:"json:ObjectRef"},args:{$type:"json:MultiTypes"},timeout:{$type:"json:Integer"}}},formId:{$type:"json:String"},form:{$type:"json:ObjectRef"},res:{$type:"IOAsyncRequestResponseCfg"},delay:{$type:"json:Integer"},id:{$type:"json:Integer"},beginDownload:{$type:"json:Integer"},endDownload:{$type:"json:Integer"},downloadTime:{$type:"json:Integer"},requestSize:{$type:"json:Integer"},responseSize:{$type:"json:Integer"},evalCb:{$type:"json:String"}}},IOAsyncRequestResponseCfg:{$type:"json:Object",$properties:{url:{$type:"json:String"},status:{$type:"json:MultiTypes"},responseText:{$type:"json:String"},responseXML:{$type:"json:ObjectRef"},responseJSON:{$type:"json:MultiTypes"},error:{$type:"json:String"}}},Callback:{$type:"json:Object",$properties:{fn:{$type:"json:FunctionRef",$mandatory:!0},scope:{$type:"json:ObjectRef"},args:{$type:"json:MultiTypes"},resIndex:{$type:"json:Integer",$default:0},apply:{$type:"json:Boolean",$default:!1}}}}}),Aria.classDefinition({$classpath:"aria.core.AppEnvironment",$dependencies:["aria.utils.Object"],$singleton:!0,$events:{changingEnvironment:"",environmentChanged:""},$prototype:{applicationSettings:{},setEnvironment:function(t,e,i){i=!!i;var n=aria.utils.Object.keys(t);if(i)aria.utils.Json.inject(t,this.applicationSettings,!0);else if(0===n.length)this.applicationSettings={},n=null;else for(var a=0;n.length>a;a++){var s=n[a];this.applicationSettings[s]=t[s]}var r={name:"changingEnvironment",changedProperties:n,asyncCalls:1};r.callback={fn:function(){r.asyncCalls--,0>=r.asyncCalls&&(r.callback.fn=null,r=null,n=null,this.$callback(e))},scope:this},this.$raiseEvent(r),this.$raiseEvent({name:"environmentChanged",changedProperties:n}),this.$callback(r.callback)},updateEnvironment:function(t,e){this.setEnvironment(t,e,!0)}}}),Aria.beanDefinitions({$package:"aria.core.environment.EnvironmentBaseCfgBeans",$namespaces:{json:"aria.core.JsonTypes"},$beans:{AppCfg:{$type:"json:Object",$restricted:!1,$properties:{appSettings:{$type:"AppSettingsCfg",$default:{}},language:{$type:"LanguageCfg",$default:{primaryLanguage:"en",region:"US"}}}},AppSettingsCfg:{$type:"json:Object",$properties:{devMode:{$type:"json:Boolean",$default:!1},debug:{$type:"json:Boolean",$default:Aria.debug}}},LanguageCfg:{$type:"json:Object",$properties:{primaryLanguage:{$type:"json:String",$mandatory:!0,$regExp:/^[a-z]{2}$/},region:{$type:"json:String",$mandatory:!0,$regExp:/^[A-Z]{2}$/}}},FormatTypes:{$type:"json:MultiTypes",$contentTypes:[{$type:"json:String"},{$type:"json:FunctionRef"}]},inputFormatTypes:{$type:"json:MultiTypes",$contentTypes:[{$type:"json:String"},{$type:"json:FunctionRef"},{$type:"json:Array",$contentType:{$type:"json:MultiTypes",$contentTypes:[{$type:"json:String"},{$type:"json:FunctionRef"}]}}]}}}),Aria.classDefinition({$classpath:"aria.core.environment.EnvironmentBase",$dependencies:["aria.utils.Object"],$constructor:function(){this.$assert(9,null!=this._cfgPackage),this._localDefCfg={};var t=aria.core.JsonValidator.normalize({json:this._localDefCfg,beanName:this._cfgPackage});this.$assert(15,t),this._changingEnvironment({changedProperties:null,asyncCalls:0,callback:null}),aria.core.AppEnvironment.$on({changingEnvironment:this._changingEnvironment,scope:this})},$destructor:function(){aria.core.AppEnvironment.$unregisterListeners(this),this._localDefCfg=null},$events:{environmentChanged:""},$prototype:{_cfgPackage:null,_changingEnvironment:function(t){var e=t.changedProperties,i=this._localDefCfg,n=null==e;if(e)for(var a=0,s=e.length;s>a;a++){var r=e[a];if(r in i){n=!0;break}}n&&(t.asyncCalls++,this._normAndApplyEnv(t.callback))},_normAndApplyEnv:function(t){var e=aria.core.JsonValidator.normalize({json:aria.core.AppEnvironment.applicationSettings,beanName:this._cfgPackage});e?(this._applyEnvironment(t),this.$raiseEvent("environmentChanged")):this.$callback(t)},_applyEnvironment:function(t){this.$callback(t)},checkApplicationSettings:function(t){return aria.core.AppEnvironment.applicationSettings[t]}}}),Aria.classDefinition({$classpath:"aria.core.environment.Environment",$singleton:!0,$dependencies:["aria.core.environment.EnvironmentBaseCfgBeans","aria.core.AppEnvironment"],$extends:"aria.core.environment.EnvironmentBase",$statics:{INVALID_LOCALE:"Error: the locale '%1' is not in correct format"},$constructor:function(){this.$EnvironmentBase.constructor.call(this),this.$on({debugChanged:function(){aria.core.JsonValidator._options.checkEnabled=this.isDebug();var t=aria.core.Log;t&&t.setLoggingLevel("*",this.isDebug()?t.LEVEL_DEBUG:t.LEVEL_ERROR)},scope:this})},$events:{debugChanged:""},$prototype:{_cfgPackage:"aria.core.environment.EnvironmentBaseCfgBeans.AppCfg",_applyEnvironment:function(t){var e=this.isDebug();e!=Aria.debug&&(Aria.debug=e,this.$raiseEvent("debugChanged")),aria.core.ResMgr?aria.core.ResMgr.changeLocale(this.getLanguage(),t):this.$callback(t)},getLanguage:function(){var t=this.checkApplicationSettings("language");return t.primaryLanguage.toLowerCase()+"_"+t.region.toUpperCase()},getRegion:function(){var t=this.checkApplicationSettings("language");return t.region},setLanguage:function(t,e){var i=!1;if(null==t)i=!0;else{var n=t.split("_");""===t||5===t.length&&null!==n&&2===n.length||2==t.length?aria.core.AppEnvironment.setEnvironment({language:{primaryLanguage:n[0],region:n[1]}},e):i=!0}i&&(this.$logError(this.INVALID_LOCALE,[t]),this.$callback(e,!0))},setDebug:function(t){var e=this.isDebug();e===t||t!==!0&&t!==!1||aria.core.AppEnvironment.setEnvironment({appSettings:{debug:t}},null,!0)},setDevMode:function(t){var e=this.isDevMode();e===t||t!==!0&&t!==!1||aria.core.AppEnvironment.setEnvironment({appSettings:{devMode:t}},null,!0)},isDevMode:function(){var t=this.checkApplicationSettings("appSettings");return t&&t.devMode?!0:!1},isDebug:function(){var t=this.checkApplicationSettings("appSettings");return t&&t.debug?!0:!1}}}),Aria.classDefinition({$classpath:"aria.core.ResMgr",$dependencies:["aria.core.environment.Environment"],$singleton:!0,$constructor:function(){this.devMode=!0,this.currentLocale=aria.core.environment.Environment.getLanguage(),this.loadedResources={}},$destructor:function(){this.currentLocale=null,this.loadedResources=null},$prototype:{$init:function(){},__loadResourceFiles:function(t,e){var i=[];for(var n in t)t.hasOwnProperty(n)&&i.push(n);Aria.load({resources:i,oncomplete:{fn:this.__resourceFileLoaded,scope:this,args:{cb:e}},onerror:{fn:this.__resourceFileLoadError,scope:this,args:{cb:e}}}),i=null
},changeLocale:function(t,e){this.currentLocale=t,aria.core.ClassMgr.unloadClassesByType("RES"),this.__loadResourceFiles(this.loadedResources,e)},addResFile:function(t){this.loadedResources[t]=this.currentLocale},getResourceLocale:function(t){return this.loadedResources[t]},getFallbackLocale:function(t){var e,i=this.loadedResources[t];null==i&&(i=this.currentLocale);var n=i.split("_");return e=2==n.length?n[0]:"",this.loadedResources[t]=e,{currResLocale:i,newResLocale:e}},__resourceFileLoaded:function(t){this.$callback(t.cb)},__resourceFileLoadError:function(t){this.$callback(t.cb)}}}),aria.core.AppEnvironment.setEnvironment({defaultWidgetLibs:{embed:"aria.embed.EmbedLib",html:"aria.html.HtmlLibrary",touch:"aria.touch.widgets.TouchWidgetLib"}});
aria.core.DownloadMgr.updateUrlMap({aria:{DomEvent:"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js",core:{"**":"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js"},embed:{"*":"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js"},html:{CheckBox:"aria/at_kitchensink-d542d0576c2929500d43521997c62c2b.js",beans:{CheckBoxCfg:"aria/at_kitchensink-d542d0576c2929500d43521997c62c2b.js","*":"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js"},"**":"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js"},modules:{"**":"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js"},pageEngine:{"**":"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js"},popups:{"*":"aria/at_kitchensink-d542d0576c2929500d43521997c62c2b.js"},resources:{handlers:{"*":"aria/at_kitchensink-d542d0576c2929500d43521997c62c2b.js"}},storage:{"*":"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js"},templates:{"*":"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js"},tools:{"**":"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js"},touch:{"*":"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js","**":"aria/at_kitchensink-d542d0576c2929500d43521997c62c2b.js"},utils:{"**":"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js"},widgetLibs:{"*":"aria/at_components-e4261e77c0ec22d407ed07e0f7ccb6ea.js"},widgets:{"**":"aria/at_kitchensink-d542d0576c2929500d43521997c62c2b.js"}},templates:{"**":"aria/at_kitchensink-d542d0576c2929500d43521997c62c2b.js"}});