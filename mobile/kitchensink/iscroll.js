/*!
 * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 * 
 * Taken from fork https://github.com/mlaval/iscroll/tree/onAnimationMove
 */
 (function(t,e){function i(t){return""===s?t:(t=t.charAt(0).toUpperCase()+t.substr(1),s+t)}var n=Math,a=e.createElement("div").style,s=function(){for(var t,e="t,webkitT,MozT,msT,OT".split(","),i=0,n=e.length;n>i;i++)if(t=e[i]+"ransform",t in a)return e[i].substr(0,e[i].length-1);return!1}(),r=s?"-"+s.toLowerCase()+"-":"",o=i("transform"),l=i("transitionProperty"),c=i("transitionDuration"),u=i("transformOrigin"),h=i("transitionTimingFunction"),p=i("transitionDelay"),d=/android/gi.test(navigator.appVersion),m=/iphone|ipad/gi.test(navigator.appVersion),g=/hp-tablet/gi.test(navigator.appVersion),_=i("perspective")in a,f="ontouchstart"in t&&!g,$=s!==!1,b=i("transition")in a,v="onorientationchange"in t?"orientationchange":"resize",y=f?"touchstart":"mousedown",A=f?"touchmove":"mousemove",E=f?"touchend":"mouseup",C=f?"touchcancel":"mouseup",S=function(){if(s===!1)return!1;var t={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return t[s]}(),w=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,1)}}(),T=function(){return t.cancelRequestAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}(),I=_?" translateZ(0)":"",D=function(i,n){var a,s=this;s.wrapper="object"==typeof i?i:e.getElementById(i),s.wrapper.style.overflow="hidden",s.scroller=s.wrapper.children[0],s.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:d,hideScrollbar:m,fadeScrollbar:m&&_,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(t){t.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null,onAnimationMove:null};for(a in n)s.options[a]=n[a];s.x=s.options.x,s.y=s.options.y,s.options.useTransform=$&&s.options.useTransform,s.options.hScrollbar=s.options.hScroll&&s.options.hScrollbar,s.options.vScrollbar=s.options.vScroll&&s.options.vScrollbar,s.options.zoom=s.options.useTransform&&s.options.zoom,s.options.useTransition=b&&s.options.useTransition,s.options.zoom&&d&&(I=""),s.scroller.style[l]=s.options.useTransform?r+"transform":"top left",s.scroller.style[c]="0",s.scroller.style[u]="0 0",s.options.useTransition&&(s.scroller.style[h]="cubic-bezier(0.33,0.66,0.66,1)"),s.options.useTransform?s.scroller.style[o]="translate("+s.x+"px,"+s.y+"px)"+I:s.scroller.style.cssText+=";position:absolute;top:"+s.y+"px;left:"+s.x+"px",s.options.useTransition&&(s.options.fixedScrollbar=!0),s.refresh(),s._bind(v,t),s._bind(y),f||"none"!=s.options.wheelAction&&(s._bind("DOMMouseScroll"),s._bind("mousewheel")),s.options.checkDOMChanges&&(s.checkDOMTime=setInterval(function(){s._checkDOMChanges()},500))};D.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(t){var e=this;switch(t.type){case y:if(!f&&0!==t.button)return;e._start(t);break;case A:e._move(t);break;case E:case C:e._end(t);break;case v:e._resize();break;case"DOMMouseScroll":case"mousewheel":e._wheel(t);break;case S:e._transitionEnd(t)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(t){var i,a=this;return a[t+"Scrollbar"]?(a[t+"ScrollbarWrapper"]||(i=e.createElement("div"),a.options.scrollbarClass?i.className=a.options.scrollbarClass+t.toUpperCase():i.style.cssText="position:absolute;z-index:100;"+("h"==t?"height:7px;bottom:1px;left:2px;right:"+(a.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(a.hScrollbar?"7":"2")+"px;top:2px;right:1px"),i.style.cssText+=";pointer-events:none;"+r+"transition-property:opacity;"+r+"transition-duration:"+(a.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(a.options.hideScrollbar?"0":"1"),a.wrapper.appendChild(i),a[t+"ScrollbarWrapper"]=i,i=e.createElement("div"),a.options.scrollbarClass||(i.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+r+"background-clip:padding-box;"+r+"box-sizing:border-box;"+("h"==t?"height:100%":"width:100%")+";"+r+"border-radius:3px;border-radius:3px"),i.style.cssText+=";pointer-events:none;"+r+"transition-property:"+r+"transform;"+r+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+r+"transition-duration:0;"+r+"transform: translate(0,0)"+I,a.options.useTransition&&(i.style.cssText+=";"+r+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),a[t+"ScrollbarWrapper"].appendChild(i),a[t+"ScrollbarIndicator"]=i),"h"==t?(a.hScrollbarSize=a.hScrollbarWrapper.clientWidth,a.hScrollbarIndicatorSize=n.max(n.round(a.hScrollbarSize*a.hScrollbarSize/a.scrollerW),8),a.hScrollbarIndicator.style.width=a.hScrollbarIndicatorSize+"px",a.hScrollbarMaxScroll=a.hScrollbarSize-a.hScrollbarIndicatorSize,a.hScrollbarProp=a.hScrollbarMaxScroll/a.maxScrollX):(a.vScrollbarSize=a.vScrollbarWrapper.clientHeight,a.vScrollbarIndicatorSize=n.max(n.round(a.vScrollbarSize*a.vScrollbarSize/a.scrollerH),8),a.vScrollbarIndicator.style.height=a.vScrollbarIndicatorSize+"px",a.vScrollbarMaxScroll=a.vScrollbarSize-a.vScrollbarIndicatorSize,a.vScrollbarProp=a.vScrollbarMaxScroll/a.maxScrollY),a._scrollbarPos(t,!0),void 0):(a[t+"ScrollbarWrapper"]&&($&&(a[t+"ScrollbarIndicator"].style[o]=""),a[t+"ScrollbarWrapper"].parentNode.removeChild(a[t+"ScrollbarWrapper"]),a[t+"ScrollbarWrapper"]=null,a[t+"ScrollbarIndicator"]=null),void 0)},_resize:function(){var t=this;setTimeout(function(){t.refresh()},d?200:0)},_pos:function(t,e){this.zoomed||(t=this.hScroll?t:0,e=this.vScroll?e:0,this.options.useTransform?this.scroller.style[o]="translate("+t+"px,"+e+"px) scale("+this.scale+")"+I:(t=n.round(t),e=n.round(e),this.scroller.style.left=t+"px",this.scroller.style.top=e+"px"),this.x=t,this.y=e,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(t,e){var i,a=this,s="h"==t?a.x:a.y;a[t+"Scrollbar"]&&(s=a[t+"ScrollbarProp"]*s,0>s?(a.options.fixedScrollbar||(i=a[t+"ScrollbarIndicatorSize"]+n.round(3*s),8>i&&(i=8),a[t+"ScrollbarIndicator"].style["h"==t?"width":"height"]=i+"px"),s=0):s>a[t+"ScrollbarMaxScroll"]&&(a.options.fixedScrollbar?s=a[t+"ScrollbarMaxScroll"]:(i=a[t+"ScrollbarIndicatorSize"]-n.round(3*(s-a[t+"ScrollbarMaxScroll"])),8>i&&(i=8),a[t+"ScrollbarIndicator"].style["h"==t?"width":"height"]=i+"px",s=a[t+"ScrollbarMaxScroll"]+(a[t+"ScrollbarIndicatorSize"]-i))),a[t+"ScrollbarWrapper"].style[p]="0",a[t+"ScrollbarWrapper"].style.opacity=e&&a.options.hideScrollbar?"0":"1",a[t+"ScrollbarIndicator"].style[o]="translate("+("h"==t?s+"px,0)":"0,"+s+"px)")+I)},_start:function(e){var i,a,s,r,l,c=this,u=f?e.touches[0]:e;c.enabled&&(c.options.onBeforeScrollStart&&c.options.onBeforeScrollStart.call(c,e),(c.options.useTransition||c.options.zoom)&&c._transitionTime(0),c.moved=!1,c.animating=!1,c.zoomed=!1,c.distX=0,c.distY=0,c.absDistX=0,c.absDistY=0,c.dirX=0,c.dirY=0,c.options.zoom&&f&&e.touches.length>1&&(r=n.abs(e.touches[0].pageX-e.touches[1].pageX),l=n.abs(e.touches[0].pageY-e.touches[1].pageY),c.touchesDistStart=n.sqrt(r*r+l*l),c.originX=n.abs(e.touches[0].pageX+e.touches[1].pageX-2*c.wrapperOffsetLeft)/2-c.x,c.originY=n.abs(e.touches[0].pageY+e.touches[1].pageY-2*c.wrapperOffsetTop)/2-c.y,c.options.onZoomStart&&c.options.onZoomStart.call(c,e)),c.options.momentum&&(c.options.useTransform?(i=getComputedStyle(c.scroller,null)[o].replace(/[^0-9\-.,]/g,"").split(","),a=+(i[12]||i[4]),s=+(i[13]||i[5])):(a=+getComputedStyle(c.scroller,null).left.replace(/[^0-9-]/g,""),s=+getComputedStyle(c.scroller,null).top.replace(/[^0-9-]/g,"")),(a!=c.x||s!=c.y)&&(c.options.useTransition?c._unbind(S):T(c.aniTime),c.steps=[],c._pos(a,s),c.options.onScrollEnd&&c.options.onScrollEnd.call(c))),c.absStartX=c.x,c.absStartY=c.y,c.startX=c.x,c.startY=c.y,c.pointX=u.pageX,c.pointY=u.pageY,c.startTime=e.timeStamp||Date.now(),c.options.onScrollStart&&c.options.onScrollStart.call(c,e),c._bind(A,t),c._bind(E,t),c._bind(C,t))},_move:function(t){var e,i,a,s=this,r=f?t.touches[0]:t,l=r.pageX-s.pointX,c=r.pageY-s.pointY,u=s.x+l,h=s.y+c,p=t.timeStamp||Date.now();return s.options.onBeforeScrollMove&&s.options.onBeforeScrollMove.call(s,t),s.options.zoom&&f&&t.touches.length>1?(e=n.abs(t.touches[0].pageX-t.touches[1].pageX),i=n.abs(t.touches[0].pageY-t.touches[1].pageY),s.touchesDist=n.sqrt(e*e+i*i),s.zoomed=!0,a=1/s.touchesDistStart*s.touchesDist*this.scale,s.options.zoomMin>a?a=.5*s.options.zoomMin*Math.pow(2,a/s.options.zoomMin):a>s.options.zoomMax&&(a=2*s.options.zoomMax*Math.pow(.5,s.options.zoomMax/a)),s.lastScale=a/this.scale,u=this.originX-this.originX*s.lastScale+this.x,h=this.originY-this.originY*s.lastScale+this.y,this.scroller.style[o]="translate("+u+"px,"+h+"px) scale("+a+")"+I,s.options.onZoom&&s.options.onZoom.call(s,t),void 0):(s.pointX=r.pageX,s.pointY=r.pageY,(u>0||s.maxScrollX>u)&&(u=s.options.bounce?s.x+l/2:u>=0||s.maxScrollX>=0?0:s.maxScrollX),(h>s.minScrollY||s.maxScrollY>h)&&(h=s.options.bounce?s.y+c/2:h>=s.minScrollY||s.maxScrollY>=0?s.minScrollY:s.maxScrollY),s.distX+=l,s.distY+=c,s.absDistX=n.abs(s.distX),s.absDistY=n.abs(s.distY),6>s.absDistX&&6>s.absDistY||(s.options.lockDirection&&(s.absDistX>s.absDistY+5?(h=s.y,c=0):s.absDistY>s.absDistX+5&&(u=s.x,l=0)),s.moved=!0,s._pos(u,h),s.dirX=l>0?-1:0>l?1:0,s.dirY=c>0?-1:0>c?1:0,p-s.startTime>300&&(s.startTime=p,s.startX=s.x,s.startY=s.y),s.options.onScrollMove&&s.options.onScrollMove.call(s,t)),void 0)},_end:function(i){if(!f||0===i.touches.length){var a,s,r,l,u,h,p,d=this,m=f?i.changedTouches[0]:i,g={dist:0,time:0},_={dist:0,time:0},$=(i.timeStamp||Date.now())-d.startTime,b=d.x,v=d.y;if(d._unbind(A,t),d._unbind(E,t),d._unbind(C,t),d.options.onBeforeScrollEnd&&d.options.onBeforeScrollEnd.call(d,i),d.zoomed)return p=d.scale*d.lastScale,p=Math.max(d.options.zoomMin,p),p=Math.min(d.options.zoomMax,p),d.lastScale=p/d.scale,d.scale=p,d.x=d.originX-d.originX*d.lastScale+d.x,d.y=d.originY-d.originY*d.lastScale+d.y,d.scroller.style[c]="200ms",d.scroller.style[o]="translate("+d.x+"px,"+d.y+"px) scale("+d.scale+")"+I,d.zoomed=!1,d.refresh(),d.options.onZoomEnd&&d.options.onZoomEnd.call(d,i),void 0;if(!d.moved)return f&&(d.doubleTapTimer&&d.options.zoom?(clearTimeout(d.doubleTapTimer),d.doubleTapTimer=null,d.options.onZoomStart&&d.options.onZoomStart.call(d,i),d.zoom(d.pointX,d.pointY,1==d.scale?d.options.doubleTapZoom:1),d.options.onZoomEnd&&setTimeout(function(){d.options.onZoomEnd.call(d,i)},200)):this.options.handleClick&&(d.doubleTapTimer=setTimeout(function(){for(d.doubleTapTimer=null,a=m.target;1!=a.nodeType;)a=a.parentNode;"SELECT"!=a.tagName&&"INPUT"!=a.tagName&&"TEXTAREA"!=a.tagName&&(s=e.createEvent("MouseEvents"),s.initMouseEvent("click",!0,!0,i.view,1,m.screenX,m.screenY,m.clientX,m.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,0,null),s._fake=!0,a.dispatchEvent(s))},d.options.zoom?250:0))),d._resetPos(400),d.options.onTouchEnd&&d.options.onTouchEnd.call(d,i),void 0;if(300>$&&d.options.momentum&&(g=b?d._momentum(b-d.startX,$,-d.x,d.scrollerW-d.wrapperW+d.x,d.options.bounce?d.wrapperW:0):g,_=v?d._momentum(v-d.startY,$,-d.y,0>d.maxScrollY?d.scrollerH-d.wrapperH+d.y-d.minScrollY:0,d.options.bounce?d.wrapperH:0):_,b=d.x+g.dist,v=d.y+_.dist,(d.x>0&&b>0||d.x<d.maxScrollX&&d.maxScrollX>b)&&(g={dist:0,time:0}),(d.y>d.minScrollY&&v>d.minScrollY||d.y<d.maxScrollY&&d.maxScrollY>v)&&(_={dist:0,time:0})),g.dist||_.dist)return u=n.max(n.max(g.time,_.time),10),d.options.snap&&(r=b-d.absStartX,l=v-d.absStartY,n.abs(r)<d.options.snapThreshold&&n.abs(l)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(h=d._snap(b,v),b=h.x,v=h.y,u=n.max(h.time,u))),d.scrollTo(n.round(b),n.round(v),u),d.options.onTouchEnd&&d.options.onTouchEnd.call(d,i),void 0;if(d.options.snap)return r=b-d.absStartX,l=v-d.absStartY,n.abs(r)<d.options.snapThreshold&&n.abs(l)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(h=d._snap(d.x,d.y),(h.x!=d.x||h.y!=d.y)&&d.scrollTo(h.x,h.y,h.time)),d.options.onTouchEnd&&d.options.onTouchEnd.call(d,i),void 0;d._resetPos(200),d.options.onTouchEnd&&d.options.onTouchEnd.call(d,i)}},_resetPos:function(t){var e=this,i=e.x>=0?0:e.x<e.maxScrollX?e.maxScrollX:e.x,n=e.y>=e.minScrollY||e.maxScrollY>0?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y;return i==e.x&&n==e.y?(e.moved&&(e.moved=!1,e.options.onScrollEnd&&e.options.onScrollEnd.call(e)),e.hScrollbar&&e.options.hideScrollbar&&("webkit"==s&&(e.hScrollbarWrapper.style[p]="300ms"),e.hScrollbarWrapper.style.opacity="0"),e.vScrollbar&&e.options.hideScrollbar&&("webkit"==s&&(e.vScrollbarWrapper.style[p]="300ms"),e.vScrollbarWrapper.style.opacity="0"),void 0):(e.scrollTo(i,n,t||0),void 0)},_wheel:function(t){var e,i,n,a,s,r=this;if("wheelDeltaX"in t)e=t.wheelDeltaX/12,i=t.wheelDeltaY/12;else if("wheelDelta"in t)e=i=t.wheelDelta/12;else{if(!("detail"in t))return;e=i=3*-t.detail}return"zoom"==r.options.wheelAction?(s=r.scale*Math.pow(2,1/3*(i?i/Math.abs(i):0)),r.options.zoomMin>s&&(s=r.options.zoomMin),s>r.options.zoomMax&&(s=r.options.zoomMax),s!=r.scale&&(!r.wheelZoomCount&&r.options.onZoomStart&&r.options.onZoomStart.call(r,t),r.wheelZoomCount++,r.zoom(t.pageX,t.pageY,s,400),setTimeout(function(){r.wheelZoomCount--,!r.wheelZoomCount&&r.options.onZoomEnd&&r.options.onZoomEnd.call(r,t)},400)),void 0):(n=r.x+e,a=r.y+i,n>0?n=0:r.maxScrollX>n&&(n=r.maxScrollX),a>r.minScrollY?a=r.minScrollY:r.maxScrollY>a&&(a=r.maxScrollY),0>r.maxScrollY&&r.scrollTo(n,a,0),void 0)},_transitionEnd:function(t){var e=this;t.target==e.scroller&&(e._unbind(S),e._startAni())},_startAni:function(){var t,e,i,a=this,s=a.x,r=a.y,o=Date.now();if(!a.animating){if(!a.steps.length)return a._resetPos(400),void 0;if(t=a.steps.shift(),t.x==s&&t.y==r&&(t.time=0),a.animating=!0,a.moved=!0,a.options.useTransition)return a._transitionTime(t.time),a._pos(t.x,t.y),a.animating=!1,t.time?a._bind(S):a._resetPos(0),void 0;i=function(){var l,c,u=Date.now();return u>=o+t.time?(a._pos(t.x,t.y),a.animating=!1,a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a),a._startAni(),void 0):(u=(u-o)/t.time-1,e=n.sqrt(1-u*u),l=(t.x-s)*e+s,c=(t.y-r)*e+r,a._pos(l,c),a.options.onAnimationMove&&a.options.onAnimationMove.call(a),a.animating&&(a.aniTime=w(i)),void 0)},i()}},_transitionTime:function(t){t+="ms",this.scroller.style[c]=t,this.hScrollbar&&(this.hScrollbarIndicator.style[c]=t),this.vScrollbar&&(this.vScrollbarIndicator.style[c]=t)},_momentum:function(t,e,i,a,s){var r=6e-4,o=n.abs(t)/e,l=o*o/(2*r),c=0,u=0;return t>0&&l>i?(u=s/(6/(l/o*r)),i+=u,o=o*i/l,l=i):0>t&&l>a&&(u=s/(6/(l/o*r)),a+=u,o=o*a/l,l=a),l*=0>t?-1:1,c=o/r,{dist:l,time:n.round(c)}},_offset:function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return t!=this.wrapper&&(e*=this.scale,i*=this.scale),{left:e,top:i}},_snap:function(t,e){var i,a,s,r,o,l,c=this;for(s=c.pagesX.length-1,i=0,a=c.pagesX.length;a>i;i++)if(t>=c.pagesX[i]){s=i;break}for(s==c.currPageX&&s>0&&0>c.dirX&&s--,t=c.pagesX[s],o=n.abs(t-c.pagesX[c.currPageX]),o=o?500*(n.abs(c.x-t)/o):0,c.currPageX=s,s=c.pagesY.length-1,i=0;s>i;i++)if(e>=c.pagesY[i]){s=i;break}return s==c.currPageY&&s>0&&0>c.dirY&&s--,e=c.pagesY[s],l=n.abs(e-c.pagesY[c.currPageY]),l=l?500*(n.abs(c.y-e)/l):0,c.currPageY=s,r=n.round(n.max(o,l))||200,{x:t,y:e,time:r}},_bind:function(t,e,i){(e||this.scroller).addEventListener(t,this,!!i)},_unbind:function(t,e,i){(e||this.scroller).removeEventListener(t,this,!!i)},destroy:function(){var e=this;e.scroller.style[o]="",e.hScrollbar=!1,e.vScrollbar=!1,e._scrollbar("h"),e._scrollbar("v"),e._unbind(v,t),e._unbind(y),e._unbind(A,t),e._unbind(E,t),e._unbind(C,t),e.options.hasTouch||(e._unbind("DOMMouseScroll"),e._unbind("mousewheel")),e.options.useTransition&&e._unbind(S),e.options.checkDOMChanges&&clearInterval(e.checkDOMTime),e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var t,e,i,a,s=this,r=0,o=0;if(s.scale<s.options.zoomMin&&(s.scale=s.options.zoomMin),s.wrapperW=s.wrapper.clientWidth||1,s.wrapperH=s.wrapper.clientHeight||1,s.minScrollY=-s.options.topOffset||0,s.scrollerW=n.round(s.scroller.offsetWidth*s.scale),s.scrollerH=n.round((s.scroller.offsetHeight+s.minScrollY)*s.scale),s.maxScrollX=s.wrapperW-s.scrollerW,s.maxScrollY=s.wrapperH-s.scrollerH+s.minScrollY,s.dirX=0,s.dirY=0,s.options.onRefresh&&s.options.onRefresh.call(s),s.hScroll=s.options.hScroll&&0>s.maxScrollX,s.vScroll=s.options.vScroll&&(!s.options.bounceLock&&!s.hScroll||s.scrollerH>s.wrapperH),s.hScrollbar=s.hScroll&&s.options.hScrollbar,s.vScrollbar=s.vScroll&&s.options.vScrollbar&&s.scrollerH>s.wrapperH,t=s._offset(s.wrapper),s.wrapperOffsetLeft=-t.left,s.wrapperOffsetTop=-t.top,"string"==typeof s.options.snap)for(s.pagesX=[],s.pagesY=[],a=s.scroller.querySelectorAll(s.options.snap),e=0,i=a.length;i>e;e++)r=s._offset(a[e]),r.left+=s.wrapperOffsetLeft,r.top+=s.wrapperOffsetTop,s.pagesX[e]=r.left<s.maxScrollX?s.maxScrollX:r.left*s.scale,s.pagesY[e]=r.top<s.maxScrollY?s.maxScrollY:r.top*s.scale;else if(s.options.snap){for(s.pagesX=[];r>=s.maxScrollX;)s.pagesX[o]=r,r-=s.wrapperW,o++;for(s.maxScrollX%s.wrapperW&&(s.pagesX[s.pagesX.length]=s.maxScrollX-s.pagesX[s.pagesX.length-1]+s.pagesX[s.pagesX.length-1]),r=0,o=0,s.pagesY=[];r>=s.maxScrollY;)s.pagesY[o]=r,r-=s.wrapperH,o++;s.maxScrollY%s.wrapperH&&(s.pagesY[s.pagesY.length]=s.maxScrollY-s.pagesY[s.pagesY.length-1]+s.pagesY[s.pagesY.length-1])}s._scrollbar("h"),s._scrollbar("v"),s.zoomed||(s.scroller.style[c]="0",s._resetPos(400))},scrollTo:function(t,e,i,n){var a,s,r=this,o=t;for(r.stop(),o.length||(o=[{x:t,y:e,time:i,relative:n}]),a=0,s=o.length;s>a;a++)o[a].relative&&(o[a].x=r.x-o[a].x,o[a].y=r.y-o[a].y),r.steps.push({x:o[a].x,y:o[a].y,time:o[a].time||0});r._startAni()},scrollToElement:function(t,e){var i,a=this;t=t.nodeType?t:a.scroller.querySelector(t),t&&(i=a._offset(t),i.left+=a.wrapperOffsetLeft,i.top+=a.wrapperOffsetTop,i.left=i.left>0?0:i.left<a.maxScrollX?a.maxScrollX:i.left,i.top=i.top>a.minScrollY?a.minScrollY:i.top<a.maxScrollY?a.maxScrollY:i.top,e=void 0===e?n.max(2*n.abs(i.left),2*n.abs(i.top)):e,a.scrollTo(i.left,i.top,e))},scrollToPage:function(t,e,i){var n,a,s=this;i=void 0===i?400:i,s.options.onScrollStart&&s.options.onScrollStart.call(s),s.options.snap?(t="next"==t?s.currPageX+1:"prev"==t?s.currPageX-1:t,e="next"==e?s.currPageY+1:"prev"==e?s.currPageY-1:e,t=0>t?0:t>s.pagesX.length-1?s.pagesX.length-1:t,e=0>e?0:e>s.pagesY.length-1?s.pagesY.length-1:e,s.currPageX=t,s.currPageY=e,n=s.pagesX[t],a=s.pagesY[e]):(n=-s.wrapperW*t,a=-s.wrapperH*e,s.maxScrollX>n&&(n=s.maxScrollX),s.maxScrollY>a&&(a=s.maxScrollY)),s.scrollTo(n,a,i)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(A,t),this._unbind(E,t),this._unbind(C,t)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(S):T(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(t,e,i,n){var a=this,s=i/a.scale;a.options.useTransform&&(a.zoomed=!0,n=void 0===n?200:n,t=t-a.wrapperOffsetLeft-a.x,e=e-a.wrapperOffsetTop-a.y,a.x=t-t*s+a.x,a.y=e-e*s+a.y,a.scale=i,a.refresh(),a.x=a.x>0?0:a.x<a.maxScrollX?a.maxScrollX:a.x,a.y=a.y>a.minScrollY?a.minScrollY:a.y<a.maxScrollY?a.maxScrollY:a.y,a.scroller.style[c]=n+"ms",a.scroller.style[o]="translate("+a.x+"px,"+a.y+"px) scale("+i+")"+I,a.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},a=null,"undefined"!=typeof exports?exports.iScroll=D:t.iScroll=D})(window,document);